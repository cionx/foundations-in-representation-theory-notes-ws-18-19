\section{Kernels and Cokernels}


\begin{definition}
  Let~$\Ccat$ be a category that has a zero object, or that is preaddive.
  Let~$f \colon X \to Y$ be a morphism in~$\Ccat$.
  \begin{enumerate}
      \item
        A \emph{kernel}\index{kernel!of a morphism} of~$f$ is a pair~$(K,k)$ consisting of
        \begin{itemize}
          \item
            an object~$K \in \Ob(\Ccat)$ and
          \item
            a morphism~$k \colon K \to X$
        \end{itemize}
        such that
        \begin{enumerate}[label = (K\arabic*)]
          \item
            $f \circ k = 0$, and
          \item
            the morphism~$k$ is universal with in property, in the sense that for every morphism~$\ell \colon L \to X$ in~$\Ccat$ with~$f \circ \ell = 0$ there exists a unique morphism~$\lambda \colon L \to K$ that makes the following diagram commute:
            \[
              \begin{tikzcd}[row sep = small, column sep = large]
                  K
                  \arrow{dr}[above right]{k}
                  \arrow[bend left]{drr}[above right]{0}
                & {}
                & {}
                \\
                  {}
                & X
                  \arrow{r}[above, near start]{f}
                & Y
                \\
                  L
                  \arrow{ur}[below right]{\ell}
                  \arrow[bend right]{urr}[below right]{0}
                  \arrow[dashed]{uu}[left]{\lambda}
                & {}
                & {}
              \end{tikzcd}
            \]
        \end{enumerate}
      \item
        A \emph{cokernel}\index{cokernel!of a morphism} of~$f$ is a pair~$(C,c)$ consisting of
        \begin{itemize}
          \item
            an object~$C \in \Ob(\Ccat)$ and
          \item
            a morphism~$c \colon Y \to C$
        \end{itemize}
        such that
        \begin{enumerate}[label=(C\arabic*)]
          \item
            $c \circ f = 0$, and
          \item
            the morphism~$c$ is universal with this property, in the sense that
            for every morphism~$d \colon Y \to D$ in~$\Ccat$ with~$d \circ f = 0$ there exists a unique morphism~$\mu \colon C \to D$ that makes the following diagram commute:
            \[
              \begin{tikzcd}[row sep = small, column sep = large]
                  {}
                & {}
                & C
                  \arrow[dashed]{dd}[right]{\mu}
                \\
                  X
                  \arrow{r}[above]{f}
                  \arrow[bend left]{urr}[above left]{0}
                  \arrow[bend right]{drr}[below left]{0}
                & Y
                  \arrow{ur}[above left]{c}
                  \arrow{dr}[below left]{d}
                & {}
                \\
                  {}
                & {}
                & D
              \end{tikzcd}
            \]
        \end{enumerate}
  \end{enumerate}
\end{definition}


\begin{remark}
  Let~$\Ccat$ be a category that has a zero object, or that is preaddive.
  Let~$f \colon X \to Y$ be a morphism in~$\Ccat$.
  \begin{enumerate}
    \item
      A pair~$(K,k)$ is a kernel of~$f$ in~$\Ccat$ if and only if it is a cokernel of~$f$ in~$\Ccat^\op$.
    \item
      Kernels and cokernels are unique up to unique isomorphism.
%     TODO: Write down explicitely what this means.
    \item
      If every morphism in~$\Ccat$ has a kernel (resp.\ a cokernel), then the category~$\Ccat$ \emph{has kernels}\index{category!has!kernels}\index{has!kernels} (resp.\ \emph{has cokernels}\index{category!has!cokernels}\index{has!cokernels}).
    \item
      The kernel of~$f$ is denoted by~$\ker(f) \to X$, and the cokernel of~$f$ is denoted by~$Y \to \coker(f)$.
  \end{enumerate}
\end{remark}


% TODO: Add a remark about categories with zero morphisms.





\lecturend{10}





\begin{notation*}
  \label{equality of (co)kernels}
  \leavevmode
  \begin{enumerate}
    \item
      Let~$\Ccat$ be a category that has a zero object and let~$f \colon X \to Y$ be a morphism in~$\Ccat$.
      Then we write~$\ker(f) = 0$ to mean that the zero morphism~$0 \to X$ is a kernel of~$f$.
      We dually write~$\coker(f) = 0$ to mean that the zero morphism~$Y \to 0$ is a cokernel of~$f$.
    \item
      Let~$\Ccat$ be a category that is preadditive, or that has a zero object.
      
      Let~$f \colon X \to Y$ be a morphism in~$\Ccat$.
      If~$g \colon Y \to Z$ is another morphism in~$\Ccat$ then we write that~$\ker(f) = \ker(gf)$ to mean that a morphism~$k \colon K \to X$ in~$\Ccat$ is a kernel of~$f$ if and only if it is a kernel of~$gf$.
      (This entails in particular that a kernel for~$f$ exists if and only if a kernel for~$gf$ exist.)
      
      Let~$h \colon W \to X$ be another morphism in~$\Ccat$.
      We write that~$\coker(f) = \coker(fh)$ to mean that a morphism~$c \colon Y \to C$ in~$\Ccat$ is a cokernel of~$f$ if and only if it is a cokernel of~$fh$.
      (This entails in particular that a cokernel for~$f$ exists if and only if a cokernel for~$fh$ exists.)
  \end{enumerate}
\end{notation*}


\begin{remark*}
  Let~$\Ccat$ be a category that has a zero object and let~$f \colon X \to Y$ be a morphism in~$\Ccat$.
  Then~$\ker(f) = 0$ if and only if it follows for every morphism~$u \colon W \to X$ in~$\Ccat$ with~$f \circ u = 0$ that already~$u = 0$.
  
  Indeed, the composition~$0 \to X \xto{f} Y$ is the zero morphism.
  That~$\ker(f) = 0$ therefore means that every morphism~$u \colon W \to X$ with~$f \circ u = 0$ factors uniquely trough the zero morphism~$0 \to X$, i.e.\ that there exists a unique morphism~$W \to 0$ that makes the triangle
  \[
    \begin{tikzcd}[sep = large]
        W
        \arrow[dashed]{d}
        \arrow{dr}[above right]{u}
        \arrow[bend left]{drr}[above right]{0}
      & {}
      & {}
      \\
        0
        \arrow{r}
      & X
        \arrow{r}[above]{f}
      & Y
    \end{tikzcd}
  \]
  commute.
  That~$u$ factors trough the zero morphism~$0 \to X$ is equivalent to~$u = 0$, and this factorization is necessarily unique because there exist only one morphism~$W \to 0$.
  
  It holds dually that~$\coker(f) = 0$ if and only if it follows for every morphism~$v \colon Y \to Z$ in~$\Ccat$ with~$v \circ f = 0$ that already~$v = 0$.
\end{remark*}


\begin{lemma}
  \label{properties of (co)kernels}
  Let~$\Ccat$ be a category that is preadditive, or that has a zero object.
  Let~$f \colon X \to Y$ be a morphism in~$\Ccat$.
  \begin{enumerate}
    \item
      If~$k \colon \ker(f) \to X$ is a kernel of~$f$ then the morphism~$k$ is a monomorphism.
      Dually, if~$c \colon Y \to \coker(f)$ is a cokernel of~$f$ then the morphism~$c$ is an epimorphism.
    \item
      Suppose that~$\Ccat$ is both preadditive and has a zero object (e.g.~$\Ccat$ is additive).
      If~$\ker(f) = 0$ then~$f$ is a monomorphism.
      Dually, if~$\coker(f) = 0$ then~$f$ is an epimorphism.
    \item
      Suppose that~$\Ccat$ has a zero object.
      If~$f$ is a monomorphism then~$\ker(f) = 0$, and if~$f$ is an epimorphism then~$\coker(f) = 0$.
    \item
      \label{(co)kernels under compositions with epis and monos}
      If~$u \colon Y \to Z$ is a monomorphism in~$\Ccat$ then~$\ker(f) = \ker(uf)$.
      Dually, if~$p \colon W \to X$ is an epimorphism in~$\Ccat$ then~$\coker(f) = \coker(fp)$.
  \end{enumerate}
\end{lemma}


\begin{proof}
  \leavevmode
  \begin{enumerate}
    \item
      Let~$u, v \colon W \to \ker(f)$ be two parallel morphisms with~$k \circ u = k \circ v$, and denote this composition by~$w \colon W \to X$.
      Then
      \[
          f \circ w
        = f \circ k \circ u
        = 0 \circ u
        = 0 \,.
      \]
      It follows from the universal property of the kernel~$k \colon \ker(f) \to X$ that there exist a unique morphism~$W \to \ker(f)$ that makes the triangle
      \[
        \begin{tikzcd}[sep = large]
            W
            \arrow[dashed]{d}
            \arrow{dr}[above right]{w}
          & {}
          \\
            \ker(f)
            \arrow{r}[above, near start]{k}
          & X
        \end{tikzcd}
      \]
      commute.
      Both~$u$ and~$v$ make this triangle commute, and so it follows that~$u = v$.
      
      That the cokernel~$c \colon Y \to \coker(f)$ is an epimorphism can be shown dually.
    \item
      Let~$u,v \colon W \to X$ be two morphisms with~$f \circ u = f \circ v$.
      Then
      \[
          f \circ (u-v)
        = f \circ u - f \circ v
        = 0 \,,
      \]
      and it follows from the universal property of the kernel~$\ker(f)$ that the difference~$u-v$ factors through~$\ker(f) = 0$, which results in the following commutative triangle:
      \[
        \begin{tikzcd}[sep = large]
            W
            \arrow[dashed]{d}
            \arrow{dr}[above right]{u-v}
          & {}
          \\
            0
            \arrow{r}
          & X
        \end{tikzcd}
      \]
      The morphisms~$W \to 0$ and~$0 \to X$ are necessarily the zero morphisms, so it follows that~$u-v = 0 \circ 0 = 0$, and hence~$u = v$.
      
      That~$f$ is an epimorphism if~$\coker(f) = 0$ can be shown dually.
    \item
      If~$u \colon W \to X$ is any morphism with~$f \circ u = 0$ then
      \[
          f \circ u
        = 0
        = f \circ 0
      \]
      and hence~$u = 0$.
      
      That~$\coker(f) = 0$ if~$f$ is an epimorphism can be shown dually.
    \item
      It holds for every morphism~$v \colon W \to X$ that
      \[
              f \circ v = 0
        \iff  uf \circ v = u \circ 0
        \iff  uf \circ v = 0 \,,
      \]
      where the first equivalence holds because~$u$ is a monomorphism.
      We thus find for every morphism~$k \colon K \to X$ in~$\Ccat$ that
      \begin{align*}
            {}& \text{$k$ is a kernel of~$f$} \\
        \iff{}& \text{every morphism~$v \colon W \to X$ with~$f \circ v = 0$ factors uniquely through~$k$}  \\
        \iff{}& \text{every morphism~$v \colon W \to X$ with~$uf \circ v = 0$ factors uniquely through~$k$} \\
        \iff{}& \text{$k$ is a kernel of~$uf$} \,.
      \end{align*}
      
      That~$\coker(f) = \coker(fp)$ can be shown dually.
    \qedhere
  \end{enumerate}
\end{proof}


\begin{notation*}
  Let~$\Ccat$ be a category that is preadditive, or that has a zero object.
  We say that a morphism~$k \colon K \to X$ in~$\Ccat$ \emph{is a kernel}\index{is a!kernel} if it is a kernel for some morphism~$f \colon X \to Y$.
  Dually, we say that a morphism~$c \colon Y \to C$ in~$\Ccat$ \emph{is a cokernel}\index{is a!cokernel} if it is a cokernel for some morphism~$f \colon X \to Y$.
\end{notation*}


\begin{example}
  \leavevmode
  \begin{enumerate}
    \item
      Let~$A$ be a~{\kalg} and consider the module category~$\Modl{A}$.
      Let~$f \colon M \to N$ be a homomorphism of~{\modules{$A$}}.
      Then the submodule~$\ker(f) = f^{-1}(0)$ of~$M$ together with the inclusion~$k \colon \ker(f) \to M$ is a kernel of~$f$.
      The quotient module~$\coker(f) = N/f(M)$ together with the canonical projection~$c \colon N \to \coker(f)$ is a cokernel of~$f$.
      
      Note that in the category~$\Modl{A}$, a morphism~$k$ is a monomorphism if and only if~$k$ is a kernel, and similarly that a morphism~$c$ is an epimorphism if and only if~$c$ is a cokernel.
      (Recall that the monomorphisms in~$\Modl{A}$ are preciely the injective module homomorphisms, and that the epimorphisms in~$\Modl{A}$ are precisely the surjective module homomorphisms.)
    \item
      Consider the category~$\Group$ and let~$f \colon G \to H$ be a group homorphism.
      
      Then the subgroup~$\ker(f) = f^{-1}(1)$ together with the inclusion~$k \colon \ker(f) \to G$ is a kernel of~$f$.
      Note that~$\ker(f)$ is always a normal subgroup of~$G$, while for every subgroup~$K' \subseteq G$ the inclusion~$k' \colon K' \to G$ is a monomorphism.
      So in~$\Group$ not every monomorphism is a kernel.
      
      A cokernel of~$f$ is given by the quotient group~$\coker(f) = H/\closure{f(G)}$ together with the canonical projection~$c \colon H \to \coker(f)$, where
      \[
                  \closure{f(G)}
        \defined  \gen{
                    h f(g) h^{-1}
                  \suchthat
                    h \in H, g \in G
                  }
      \]
      is the normal subgroup of~$H$ generated by~$f(G)$, i.e.\ the normal closure of~$f(G)$ in~$H$.
      If~$p \colon H \to C$ is any epimorphism in~$\Group$, then~$p$ is surjective, and hence
      \[
              C
        \cong H/\ker(p)
        =     \coker(\ker(p) \to H)
      \]
      This shows that in~$\Group$ every epimorphism is a cokernel.
    \item
      Let~$\Set_*$ be the category of pointed sets\index{category!of pointed sets}:
      
      The objects of~$\Set_*$ are pairs~$(X,x_0)$ consisting of a set~$X$ and a fixed base point~$x_0 \in X$.
      A morphism~$f \colon (X,x_0) \to (Y,y_0)$ in~$\Set_*$ is a map~$f \colon X \to Y$ with~$f(x_0) = y_0$.
      (Such maps are also known as \emph{pointed maps}\index{pointed map}.)
      The category~$\Set_*$ has the singleton~$(\{\ast\}, \ast)$ as a zero object.
      The monomorphisms in~$\Set_*$ are precisely the injective pointed maps, and the epimorphisms are the surjective pointed maps.
      
      Let~$f \colon (X,x_0) \to (Y,y_0)$ be a morphism in~$\Set_*$.
      A kernel for~$f$ is given by~$\ker(f) = (f^{-1}(y_0), x_0)$ together with the inclusion~$k \colon \ker(f) \to (X,x_0)$.
      A cokernel for~$f$ is given by~$\coker(f) = (Y/{\sim}, \class{y_0})$ together with the canonical projection~$c \colon (Y, y_0) \to \coker(f)$, where~$\sim$ is the equivalence relation on~$Y$ generated by~$y \sim y'$ for all~$y, y' \in f(X)$.
      More explicitely, we have for any two~$y, y' \in Y$ that
      \[
              y \sim y'
        \iff (\text{$y = y'$ or~$y, y' \in f(X)$}) \,.
      \]
      
      Every monomorphism in~$\Set_*$ is a kernel (namely that of its cokernel).
      But not every epimorphism in~$\Set_*$ is a cokernel, because it holds for every cokernel~$c \colon (Y,y_0) \to (C,c_0)$ that every element~$z \in C$ with~$z \neq c_0$ has precisely one preimage under~$c$.
      (This follows from the above explicit description of the cokernel.)
%     TODO: Prove the above claims.
    \item
      The ring~$A \defined \Integer[t_1, t_2, t_3, \dotsc]$ is not noetherian because the ideal~$I \defined \genideal{t_1, t_2, t_3, \dotsc}$ of~$A$ is not finitely generated.
      Consider the category~$\Modlfg{A}$ of finitely generated~{\modules{$A$}}.
      This category is additive.
      
      Every morphism~$f \colon M \to N$ in~$\Modlfg{A}$ has a cokernel in~$\Modlfg{A}$ because the cokernel of~$f$ in~$\Modl{A}$ is already contained in~$\Modlfg{A}$ (and the zero morphisms in~$\Modlfg{A}$ coincides with the one in~$\Modl{A}$).
      
      Let~$f \colon A \to A/I$ be the canonical projection;
      note that~$A/I$ is finitely generated and hence contained in~$\Modlfg{A}$ (even though the~{\modules{$A$}}~$I$ is not contained in~$\Modl{A}$).
      The morphism~$f$ has no kernel in~$\Modl{A}^\fg$:
      
      Morally speaking, the problem is that the kernel of~$f$ in~$\Modl{A}$, which is~$I$, is not contained in~$\Modlfg{A}$.
      But this is not yet a proper proof because a kernel of~$f$ in~$\Modlfg{A}$ does not necessarily have to also be a kernel of~$f$ in~$\Modl{A}$.
      
      So instead, assume that there exists a kernel~$k \colon K \to A$ of~$f$ in~$\Modlfg{A}$.
      Then~$f \circ k = 0$ and hence~$k(K) \subseteq I$.
      Then for every~$i \in I$ the morphism
      \[
                \ell_i
        \colon  A
        \to     A \,,
        \quad   a
        \mapsto t_i a
      \]
      satisfies~$\ell_i(A) \subseteq I$ and hence~$f \circ \ell_i = 0$.
      It follows that the morphism~$\ell_i$ factors uniquely trough the kernel~$k$, i.e.\ that there exists a unique morphism~$\lambda_i \colon A \to K$ that makes the triangle
      \[
        \begin{tikzcd}[sep = large]
            A
            \arrow[dashed]{d}[left]{\lambda_i}
            \arrow{dr}[above right]{\ell_i}
          & {}
          \\
            K
            \arrow{r}[below]{k}
          & A
        \end{tikzcd}
      \]
      commute.
      It follows for every~$i \in I$ that
      \[
            t_i
        =   \ell_i(1)
        =   (k \circ \lambda_i)(1)
        =   k(\lambda_i(1))
        \in k(K)
      \]
      and hence~$t_i \in k(K)$.
      This shows that also~$I \subseteq k(K)$, and hence~$I = k(K)$.
      But it follows from~$K$ being finitely generated that~$k(K)$ is also finitely generated, which contradicts~$I$ not being finitely generated.
  \end{enumerate}
\end{example}


% TODO: Add example: divisible abelian groups.


\begin{remark*}[Functoriality of the (co)kernel]
  \label{functoriality of (co)kernel}
  Let~$\Ccat$ be a category that is preadditive, or that has a zero object.
  \begin{enumerate}
    \item
      Let~$f \colon X \to Y$ and~$f' \colon X' \to Y'$ be two morphisms in the category~$\Ccat$ that admit kernels~$k \colon K \to X$ and~$k' \colon K' \to X'$.
      Then for any pair~$(\varphi,\varphi'')$ of morphisms~$\varphi \colon X \to Y$ and~$\varphi'' \colon Y \to Y''$ that make the square
      \[
        \begin{tikzcd}
          & X
            \arrow{r}[above]{f}
            \arrow[dashed]{d}[left]{\varphi}
          & Y
            \arrow[dashed]{d}[right]{\varphi''}
          \\
          & X'
            \arrow{r}[above]{f'}
          & Y'
        \end{tikzcd}
      \]
      commute, there exists a unique morphism~$\varphi' \colon K \to K'$ that makes the diagram
      \[
        \begin{tikzcd}
            K
            \arrow{r}[above]{k}
            \arrow[dashed]{d}[left]{\varphi'}
          & X
            \arrow{r}[above]{f}
            \arrow{d}[left]{\varphi}
          & Y
            \arrow{d}[right]{\varphi''}
          \\
            K'
            \arrow{r}[above]{k'}
          & X'
            \arrow{r}[above]{f'}
          & Y'
        \end{tikzcd}
      \]
      commute.
      Indeed, it holds for the composition~$\varphi \circ k \colon K \to X'$ that
      \[
          f' \circ \varphi \circ k
        = \varphi'' \circ f \circ k
        = \varphi'' \circ 0
        = 0 \,,
      \]
      hence there exists a unique morphism~$\varphi' \colon K \to K'$ with~$k' \circ \varphi' = \varphi \circ k$ by the universal property of the kernel~$k' \colon X' \to Y'$ of~$f'$.
      
      This induced morphism between kernels is functorial in the following sense:
      \begin{itemize}
        \item
          Let~$f \colon X \to Y$ be a morphism in~$\Ccat$ that admits a kernel~$k \colon K \to X$.
          Then the square
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\id_X}
              & Y
                \arrow[dashed]{d}[right]{\id_Y}
              \\
                X
                \arrow{r}[above]{f}
              & Y
            \end{tikzcd}
          \]
          commutes.
          The induced morphism~$K \to K$ is given by the identity~$\id_K$ because the diagram
          \[
            \begin{tikzcd}
                K
                \arrow{r}[above]{k}
                \arrow[dashed]{d}[left]{\id_K}
              & X
                \arrow{r}[above]{f}
                \arrow{d}[left]{\id_X}
              & Y
                \arrow{d}[right]{\id_Y}
              \\
                K
                \arrow{r}[above]{k}
              & X
                \arrow{r}[above]{f}
              & Y
            \end{tikzcd}
          \]
          commutes.
        \item
          Let
          \[
            f \colon X \to Y \,,
            \quad
            f' \colon X' \to Y' \,,
            \quad
            f'' \colon X'' \to Y''
          \]
          be morphisms in~$\Ccat$ that admit kernels
          \[ 
            k \colon K \to X \,,
            \quad
            k' \colon K' \to X' \,,
            \quad
            k'' \colon K'' \to X'' \,.
          \]
          Let
          \[
            \varphi \colon X \to Y,\,
            \varphi'' \colon X' \to Y'
            \quad\text{and}\quad
            \psi \colon X' \to X'',\,
            \psi'' \colon Y' \to Y''
          \]
          be morphisms in~$\Ccat$ that makes the squares
          \[
            \begin{tikzcd}
              & X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\varphi}
              & Y
                \arrow[dashed]{d}[right]{\varphi''}
              \\
              & X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
            \qquad\text{and}\qquad
            \begin{tikzcd}
              & X'
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\psi}
              & Y'
                \arrow[dashed]{d}[right]{\psi''}
              \\
              & X''
                \arrow{r}[above]{f'}
              & Y''
            \end{tikzcd}
          \]
          commute.
          Then for
          \[
                      \theta
            \defined  \psi \circ  \varphi
            \quad\text{and}\quad
                      \theta''
            \defined  \psi'' \circ \varphi''
          \]
          the square
          \[
            \begin{tikzcd}
              & X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\theta}
              & Y
                \arrow[dashed]{d}[right]{\theta''}
              \\
              & X''
                \arrow{r}[above]{f'}
              & Y''
            \end{tikzcd}
          \]
          again commutes by the commutativity of the following diagram:
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow{d}[left]{\varphi}
                \arrow[dashed, bend right = 60]{dd}[left]{\theta}
              & Y
                \arrow{d}[right]{\varphi''}
                \arrow[dashed, bend left = 60]{dd}[right]{\theta''}
              \\
                X'
                \arrow{r}[above]{f'}
                \arrow{d}[left]{\psi}
              & Y'
                \arrow{d}[right]{\psi''}
              \\
                X''
                \arrow{r}[above]{f''}
              & Y''
            \end{tikzcd}
          \]
          Let
          \[
            \varphi' \colon K \to K' \,,
            \quad
            \psi' \colon K' \to K'' \,,
            \quad
            \theta' \colon K \to K''
          \]
          be the induced morphisms.
          Then
          \[
              \theta'
            = \psi' \circ \varphi'  \,.
          \]
          Indeed, we have the following commutative diagram:
          \[
            \begin{tikzcd}[sep = huge]
                K
                \arrow{r}[above]{k}
                \arrow{d}[right]{\varphi'}
              & X
                \arrow{r}[above]{f}
                \arrow{d}[right]{\varphi}
              & Y
                \arrow{d}[right]{\varphi''}
              \\
                K'
                \arrow{r}[above, near start]{k'}
                \arrow{d}[right]{\psi'}
              & X'
                \arrow{r}[above, near start]{f'}
                \arrow{d}[right]{\psi}
              & Y'
                \arrow{d}[right]{\psi''}
              \\
                K''
                \arrow{r}[above]{k''}
                \arrow[from=uu, dashed, bend right = 45, crossing over, "\psi' \circ \varphi'" left, near start]
              & X''
                \arrow{r}[above]{f''}
                \arrow[from=uu, dashed, bend right = 45, crossing over, "\theta" left, near start]
              & Y''
                \arrow[from=uu, dashed, bend right = 45, crossing over, "\theta''" left, near start]
            \end{tikzcd}
          \]
          The commutativity of the subdiagram
          \[
            \begin{tikzcd}
                K
                \arrow{r}[above]{k}
                \arrow[dashed]{d}[left]{\psi' \circ \varphi'}
              & X
                \arrow{r}[above]{f}
                \arrow{d}[left]{\theta}
              & Y
                \arrow[dashed]{d}[right]{\theta''}
              \\
                K''
                \arrow{r}[above]{k''}
              & X'
                \arrow{r}[above]{f''}
              & Y''
            \end{tikzcd}
          \]
          shows that~$\psi' \circ \varphi'$ satisfies the defining property of~$\theta'$, and hence~$\theta' = \psi' \circ \varphi'$.
      \end{itemize}
      Suppose that the category~$\Ccat$ is preadditive.
      Then we also have the following additivity of the induced morphism between kernels:
      \begin{itemize}[resume]
        \item
          Let
          \[
            f \colon X \to Y
            \quad\text{and}\quad
            f' \colon X' \to Y'
          \]
          be morphisms in~$\Ccat$ that admit kernels
          \[
            k \colon K \to X
            \quad\text{and}\quad
            k' \colon K' \to X' \,.
          \]
          Let
          \[
            \varphi \colon X \to X',\,
            \varphi'' \colon Y \to Y'
            \quad\text{and}\quad
            \psi \colon X \to X',\,
            \psi'' \colon Y \to Y'
          \]
          be morphisms in~$\Ccat$ that make the squares
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\varphi}
              & Y
                \arrow[dashed]{d}[right]{\varphi''}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
            \qquad\text{and}\qquad
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\psi}
              & Y
                \arrow[dashed]{d}[right]{\psi''}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
          \]
          commute.
          Then for the morphisms
          \[
            \theta \defined \psi +\varphi
            \quad\text{and}\quad
            \theta'' \defined \psi'' + \varphi''
          \]
          the square
          \[\begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\theta}
              & Y
                \arrow[dashed]{d}[right]{\theta''}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
          \]
          again commutes because
          \begin{align*}
                \theta'' \circ f
             =  (\varphi'' + \psi'') \circ f
            &=  \varphi'' \circ f + \psi'' \circ f  \\
            &=  f \circ \varphi + f \circ \psi
             =  f \circ (\varphi + \psi)
             =  f \circ \theta \,.
          \end{align*}
          It then holds for the induced morphisms between kernels
          \begin{gather*}
                    \varphi', \psi', \theta'
            \colon  K
            \to     K'
          \shortintertext{and}
              \theta'
            = \varphi' + \psi' \,.
          \end{gather*}
          Indeed, it follows from the commutativity of the squares
          \[
            \begin{tikzcd}
                K
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\varphi'}
              & X
                \arrow[dashed]{d}[right]{\varphi}
              \\
                K'
                \arrow{r}[above]{f'}
              & X'
            \end{tikzcd}
            \qquad\text{and}\qquad
            \begin{tikzcd}
                K
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\psi'}
              & X
                \arrow[dashed]{d}[right]{\psi}
              \\
                K'
                \arrow{r}[above]{f'}
              & X'
            \end{tikzcd}
          \]
          in the same way as above that the square
          \[
            \begin{tikzcd}
                K
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\varphi' + \psi'}
              & X
                \arrow[dashed]{d}[right]{\varphi + \psi}
              \\
                K'
                \arrow{r}[above]{f'}
              & X'
            \end{tikzcd}
          \]
          again commutes.
          Hence~$\varphi' + \psi'$ satisfies the defining property of the induced morphism~$\theta'$, and thus~$\theta' = \varphi' + \psi'$.
      \end{itemize}
    \item
      For cokernels the dual construction works:
      
      Suppose that~$f \colon X \to Y$ and~$f' \colon X' \to Y'$ are morphisms in~$\Ccat$ that admit cokernels~$c \colon Y \to C$ and~$c' \colon Y' \to C'$.
      If~$\varphi' \colon X \to X'$ and~$\varphi \colon Y \to Y'$ are morphisms that makes the square
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow[dashed]{d}[left]{\varphi'}
          & Y
            \arrow[dashed]{d}[right]{\varphi}
          \\
            X'
            \arrow{r}[above]{f'}
          & Y'
        \end{tikzcd}
      \]
      commute, then there exist a unique morphism~$\varphi'' \colon C \to C'$ that makes the diagram
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow{d}[left]{\varphi'}
          & Y
            \arrow{r}[above]{c}
            \arrow{d}[right]{\varphi}
          & C
            \arrow[dashed]{d}[right]{\varphi''}
          \\
            X'
            \arrow{r}[above]{f'}
          & Y'
            \arrow{r}[above]{c'}
          & C'
        \end{tikzcd}
      \]
      commute.
      This induced morphism between cokernels is functorial and additive in the following way:
      \begin{itemize}
        \item
          If~$f \colon X \to Y$ is a morphism in~$\Ccat$ that admits a cokernel~$c \colon Y \to C$ then the square
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\id_X}
              & Y
                \arrow[dashed]{d}[right]{\id_Y}
              \\
                X
                \arrow{r}[above]{f}
              & Y
            \end{tikzcd}
          \]
          commutes, and the induced morphism~$C \to C$ is the identity~$\id_C$.
        \item
          Let
          \[
            f \colon X \to Y \,,
            \quad
            f' \colon X' \to Y' \,,
            \quad
            f'' \colon X'' \to Y''
          \]
          be morphisms in~$\Ccat$ that admit cokernels
          \[
            c \colon Y \to C \,,
            \quad
            c' \colon Y' \to C' \,,
            \quad
            c'' \colon Y'' \to C'' \,.
          \]
          If
          \[
            \varphi' \colon X \to X' \,,
            \varphi \colon Y \to Y'
            \quad\text{and}\quad
            \psi' \colon X' \to X'' \,,
            \psi \colon Y' \to Y''
          \]
          are morphisms that make the squares
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\varphi'}
              & Y
                \arrow[dashed]{d}[right]{\varphi}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
            \qquad\text{and}\qquad
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\psi'}
              & Y
                \arrow[dashed]{d}[right]{\psi}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
          \]
          commute, then for
          \[
                      \theta'
            \defined  \psi' \circ \varphi'
            \quad\text{and}\quad
                      \theta
            \defined  \psi \circ \varphi
          \]
          the square
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\psi' \circ \varphi'}
              & Y
                \arrow[dashed]{d}[right]{\psi \circ \varphi}
              \\
                X''
                \arrow{r}[above]{f''}
              & Y''
            \end{tikzcd}
          \]
          again commutes.
          It then holds for the induced morphisms
          \[
            \varphi'' \colon C \to C' \,,
            \quad
            \psi'' \colon C' \to C'' \,,
            \quad
            \theta'' \colon C \to C''
          \]
          that~$\theta'' = \psi'' \circ \varphi''$.
        \item
          Suppose that~$\Ccat$ is preadditive, and let
          \[
            f \colon X \to Y
            \quad\text{and}\quad
            f' \colon X' \to Y'
          \]
          be morphisms in~$\Ccat$ that admit cokernels
          \[
            c \colon Y \to C
            \quad\text{and}\quad
            c' \colon Y' \to C' \,.
          \]
          Let
          \[
            \varphi' \colon X \to X',\,
            \varphi \colon Y \to Y'
            \quad\text{and}\quad
            \psi' \colon X \to X',\,
            \psi \colon Y \to Y'
          \]
          be morphisms in~$\Ccat$ that make the squares
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\varphi'}
              & Y
                \arrow[dashed]{d}[right]{\varphi}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
            \qquad\text{and}\qquad
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\psi'}
              & Y
                \arrow[dashed]{d}[right]{\psi}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
          \]
          commute.
          Then for the morphisms
          \[
            \theta' \defined \psi' +\varphi'
            \quad\text{and}\quad
            \theta \defined \psi + \varphi
          \]
          the square
          \[\begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\theta'}
              & Y
                \arrow[dashed]{d}[right]{\theta}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
          \]
          again commutes, and it holds for the induced morphisms
          \begin{gather*}
                    \varphi'', \psi'', \theta''
            \colon  C
            \to     C'
          \shortintertext{that}
              \theta''
            = \varphi'' + \psi'' \,.
          \end{gather*}
      \end{itemize}
    \item
      Suppose that the category~$\Ccat$ has kernels.
      The above \enquote{functoriality} of the kernel can be used to construct a functor~$\Ker \colon \Mor(\Ccat) \to \Mor(\Ccat)$, where~$\Mor(\Ccat)$ denotes the morphism category of~$\Ccat$ from \cref{morphism category}:
      
      For any object~$(X,f,Y) \in \Mor(\Ccat)$ we choose%
      \footnote{This choice can be avoided by working with \emph{anafunctors} instead of just functors, as explained in~\cite{avoidingchoice}.}
      a kernel~$k \colon K \to X$ of~$f$ and set~$\Ker(f) \defined (K,k,X)$.
      For a morphism~$(g,g') \colon (X,f,Y) \to (X,f',Y)$ in~$\Mor(\Ccat)$ we get the following commutative square:
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow[dashed]{d}[left]{g}
          & Y
            \arrow[dashed]{d}[right]{g'}
          \\
            X'
            \arrow{r}[above]{f'}
          & Y'
        \end{tikzcd}
      \]
      For the chosen kernels~$\Ker(X,f,Y) = (K,k,X)$ and~$\Ker(X',f,Y') = (K',k',X')$ we set~$\Ker((h,h')) = (K,h'',K')$ where~$h'' \colon K \to K'$ is the unique morphism that makes the diagram
      \[
        \begin{tikzcd}
            K
            \arrow{r}[above]{k}
            \arrow[dashed]{d}[left]{h''}
          & X
            \arrow{r}[above]{f}
            \arrow{d}[left]{h}
          & Y
            \arrow{d}[right]{h'}
          \\
            K'
            \arrow{r}[above]{k'}
          & X'
            \arrow{r}[above]{f'}
          & Y'
        \end{tikzcd}
      \]
      commute.
      The above \enquote{functoriality} of the kernel shows that~$\Ker$ is a functor~$\Ker \colon \Mor(\Ccat) \to \Mor(\Ccat)$.
      
      If the category~$\Ccat$ has cokernels, then one can similarly use the above \enquote{functoriality} of the cokernel to construct a functor~$\Coker \colon \Mor(\Ccat) \to \Mor(\Ccat)$.
    \item
      Suppose that the category~$\Ccat$ has kernels.
      The data of the constructed kernel functor~$\Ker \colon \Mor(\Ccat) \to \Mor(\Ccat)$ can also be arranged in a different way.
      Namely that of a kernel functor~$\ker \colon \Mor(\Ccat) \to \Ccat$ together with a natural transformation~$k \colon S \to \ker$.
      
      Let~$S \colon \Mor(\Ccat) \to \Ccat$ be the source-functor from \cref{source target functors}.
      The above functor~$\Ker \colon \Mor(\Ccat) \to \Mor(\Ccat)$ assigns to each morphism~$f \colon X \to Y$ in~$\Ccat$ a triple~$(\ker(f), k_f, X)$ such that
      \[
                k_f
        \colon  \ker(f)
        \to     X
      \]
      is a kernel of~$f$.
      We furthermore get for every commutative square
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow[dashed]{d}[left]{\varphi}
          & Y
            \arrow[dashed]{d}[right]{\varphi''}
          \\
            X'
            \arrow{r}[above]{f'}
          & Y'
        \end{tikzcd}
      \]
      in~$\Ccat$ that~$\Ker((\varphi,\varphi''))$ is the triple~$(\ker(f), \ker(\varphi,\varphi''), \ker(f'))$ where
      \[
                \ker(\varphi, \varphi'')
        \colon  \ker(f)
        \to     \ker(f')
      \]
      is the unique morphism that makes the square
      \[
        \begin{tikzcd}
            \ker(f)
            \arrow{r}[above]{k_f}
            \arrow[dashed]{d}[left]{\ker(\varphi, \varphi'')}
          & X
            \arrow{r}[above]{f}
            \arrow{d}[right]{\varphi}
          & Y
            \arrow{d}[right]{\varphi''}
          \\
            \ker(f')
            \arrow{r}[above]{k_{f'}}
          & X'
            \arrow{r}[above]{f'}
          & Y'
        \end{tikzcd}
      \]
      commute.
      In this way we have constructed~$\ker \colon \Mor(\Ccat) \to \Ccat$ together with a natural transformation~$k \colon \ker \to S$.
      
      If the category~$\Ccat$ has cokernels, then we can dually encode the data of the cokernel functor~$\Coker \colon \Mor(\Ccat) \to \Mor(\Ccat)$ in form of a functor~$\coker \colon \Mor(\Ccat) \to \Ccat$ together with a natural transformation~$c \colon T \to \coker$, where~$T \colon \Mor(\Ccat) \to \Ccat$ denotes the target-functor from \cref{source target functors}.
  \end{enumerate}
\end{remark*}


\begin{definition}
  Let~$\Ccat$ be a category that is preadditive, or that has a zero object, and that has kernels and cokernels.
  Let~$f \colon X \to Y$ be a morphism in~$\Ccat$.
  \begin{enumerate}
    \item
      An \emph{image}\index{image!of a morphism} of~$f$ is a kernel of a cokernel of~$f$, and is denoted by~$\im(f) \to Y$.
    \item
      A \emph{coimage}\index{coimage!of a morphism} of~$f$ is a cokernel of a kernel of~$f$, and is denoted by~$X \to \coim(f)$.
  \end{enumerate}
\end{definition}


\begin{example*}
  Let~$A$ be a~{\kalg} and let~$f \colon M \to N$ be a morphism in~$\Modl{A}$ (or~$\Modr{A}$).
  Then an image of~$f$ is given by the submodule~$\im(f) = f(M)$ of~$N$ together with the inclusion~$\im(f) \to N$.
  A coimage of~$f$ is given by the quotient module~$\coim(f) = M/\ker(f)$ together with the canonical projection~$M \to \coim(f)$.
\end{example*}


\begin{remarknonum}
  Images and coimages are unique up to unique isomorphisms.
% TODO: Make this more explicit and prove it.
\end{remarknonum}


\begin{remark*}
  \label{(co)images and monos and epis}
  Let~$\Ccat$ be a category that is preadditive, or that admits a zero object.
  \begin{enumerate}
    \item
      It follows from \cref{properties of (co)kernels} that images are monomorphisms and coimages are epimorphisms.
    \item
      If~$f \colon X \to Y$ is a morphism in~$\Ccat$ and~$h \colon W \to X$ is an epimorphism in~$\Ccat$ then~$\im(fh) = \im(f)$ (in the sense of \cref{equality of (co)kernels}).
      Indeed, it follows from part~\ref*{(co)kernels under compositions with epis and monos} of \cref{properties of (co)kernels} that~$\coker(f) = \coker(fh)$, i.e., that for the morphisms~$f$ and~$fh$ the same cokernel can be chosen (and that a cokernel exists for one of them if and only if a cokernel exists for the other one).
      We can then also choose the kernels of~$\coker(f)$ and~$\coker(fh)$ to be the same.
      
      Similarly, if~$g \colon Y \to Z$ is a monomorphism then~$\coim(f) = \coim(gf)$.
  \end{enumerate}
\end{remark*}


\begin{lemma}[Canonical factorization]
  \index{canonical factorization}
  \label{canonical factorization}
  Let~$\Ccat$ be a category that is preadditive, or that has a zero object, and that has kernels and cokernels.
  Let~$f \colon X \to Y$ be a morphism in~$\Ccat$.
  \begin{enumerate}
    \item
      \label{restriction to image}
      There exists a unique morphism~$f' \colon X \to \im(f)$ in~$\Ccat$ that makes the following triangle commute:
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow[dashed]{dr}[below left]{f'}
          & Y
          \\
            {}
          & \im(f)
            \arrow{u}
        \end{tikzcd}
      \]
    \item
      There exists a unique morphism~$\bar{f} \colon \coim(f) \to Y$ in~$\Ccat$ that makes the following triangle commute:
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow{d}
          & Y
          \\
            \coim(f)
            \arrow[dashed]{ur}[below right]{\bar{f}}
          & {}
        \end{tikzcd}
      \]
    \item
      There exists a unique morphism~$\tilde{f} \colon \coim(f) \to \im(f)$ in~$\Ccat$ that makes the following square commute:
      \begin{equation}
        \label{canonical morphism from coim to im}
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow{d}
          & Y
          \\
            \coim(f)
            \arrow[dashed]{r}[above]{\tilde{f}}
          & \im(f)
            \arrow{u}
        \end{tikzcd}
      \end{equation}
    \item
      The morphism~$\tilde{f}$ is compatible with the morphisms~$f'$ and~$\bar{f}$ in the sense that the diagrams
      \begin{equation}
        \label{compatibility of induced morphisms}
        \begin{tikzcd}[column sep = large, row sep = huge]
            X
            \arrow{r}[above]{f}
            \arrow{dr}[above right]{f'}
            \arrow{d}
          & Y
          \\
            \coim(f)
            \arrow{r}[above]{\tilde{f}}
          & \im(f)
            \arrow{u}
        \end{tikzcd}
        \qquad\text{and}\qquad
        \begin{tikzcd}[column sep = large, row sep = huge]
            X
            \arrow{r}[above]{f}
            \arrow{d}
          & Y
          \\
            \coim(f)
            \arrow{r}[above]{\tilde{f}}
            \arrow{ur}[above left]{\bar{f}}
          & \im(f)
            \arrow{u}
        \end{tikzcd}
      \end{equation}
      commute.
  \end{enumerate}
\end{lemma}


\begin{proof}
  We denote the various kernels and cokernels by
  \[
    k \colon \ker(f) \to X  \,,
    \quad
    c \colon Y \to \coker(f)  \,,
    \quad
    i \colon \im(f) \to Y \,,
    \quad
    p \colon X \to \coim(f) \,.
  \]
  \begin{enumerate}
    \item
      The morphism~$i \colon \im(f) \to Y$ is a kernel of the cokernel~$c \colon Y \to \coker(f)$, hence it follows from~$c \circ f = 0$ that there exist a unique morphism~$f' \colon X \to \im(f)$ that makes the following diagram commute:
      \[
        \begin{tikzcd}[row sep = large]
            {}
          & \coker(f)
          \\
            X
            \arrow{ur}[above left]{0}
            \arrow{r}[above]{f}
            \arrow[dashed]{dr}[below left]{f'}
          & Y
            \arrow{u}[right]{c}
          \\
            {}
          & \im(f)
            \arrow{u}[right]{i}
        \end{tikzcd}
%         \begin{tikzcd}
%             X 
%             \arrow{r}[above]{f}
%             \arrow[bend left = 40]{rr}[above left]{0}
%             \arrow[dashed]{dr}[below left]{f'}
%           & Y
%             \arrow{r}[above]{c}
%           & \coker(f)
%           \\
%             {}
%           & \im(f)
%             \arrow{u}[right]{i}
%           & {}
%         \end{tikzcd}
      \]
    \item
      This can be shown dually to part~\ref*{restriction to image}.
    \item
      We construct~$\tilde{f}$ by using the already constructed morphism~$f' \colon X \to \im(f)$:
      The morphism~$p \colon X \to \coim(f)$ is a cokernel of the kernel~$k \colon \ker(f) \to X$.
      It holds that
      \[
          i \circ f' \circ  k
        = f \circ k
        = 0
        = i \circ 0 \,,
      \]
      and hence~$f' \circ k = 0$ because~$i$ is a monomorphism.
      It follows from the universal property of the cokernel~$p \colon X \to \coim(f)$ that there exist a unique morphism~$\tilde{f} \colon \coim(f) \to \im(f)$ that makes the following diagram commute:
      \[
        \begin{tikzcd}[column sep = 5em, row sep = huge]
            \ker(f)
            \arrow{d}[left]{k}
            \arrow[bend left]{dr}[above right]{0}
          & {}
          \\
            X
            \arrow{r}[above, near start]{f}
            \arrow{dr}[above right]{f'}
            \arrow{d}[left]{p}
          & Y
          \\
            \coim(f)
            \arrow[dashed]{r}[below]{\tilde{f}}
          & \im(f)
            \arrow{u}[right]{i}
            \arrow[dashed, from=uul, bend left = 15, crossing over, near start, "0"]
        \end{tikzcd}
      \]
      This shows the existence of~$\tilde{f}$.
      Suppose that~$\tilde{\tilde{f}} \colon \coim(f) \to \im(f)$ is another morphism that makes the diagram~\eqref{canonical morphism from coim to im} commute.
      Then
      \[
          i \circ \tilde{\tilde{f}} \circ p
        = f
        = i \circ \tilde{f} \circ p \,.
      \]
      It follows from~$i$ being a monomorphism that
      \[
          \tilde{\tilde{f}} \circ p
        = \tilde{f} \circ p \,,
      \]
      and it then further follows from~$p$ being an epimorphism that
      \[
        \tilde{\tilde{f}} = \tilde{f} \,.
      \]
      This shows the desired uniqueness of the morphism~$\tilde{f}$.
    \item
      It follows from the above construction of~$\tilde{f}$ that of the two diagrams in~\eqref{compatibility of induced morphisms} the left one commutes.
      We could have dually constructed~$\tilde{f}$ by using the morphism~$\bar{f}$ instead of~$f'$, which would then give us that the right diagram commutes.
      We can alternatively check the commutativity of the right hand diagram by hand:
      It holds that
      \[
          i \circ \tilde{f} \circ p
        = f
        = \bar{f} \circ p
      \]
      and hence~$i \circ \tilde{f} = \bar{f}$ because~$p$ is an epimorphism.
    \qedhere
  \end{enumerate}
\end{proof}


\begin{example*}
  Let~$A$ be a~{\kalg} and consider the module category~$\Modl{A}$, which is additive.
  Let~$f \colon M \to N$ be a homomorphism of left~{\modules{$A$}}, i.e., a morphism in~$\Modl{A}$.
  Then the canonical morphism~$f' \colon \im(f) \to N$ is the inclusion~$n \mapsto n$, the canonical morphism~$\tilde{f} \colon M \to \coker(f) = M/\ker(f)$ is the canonical projection~$m \mapsto \class{m}$, and the canonical morphism~$\bar{f} \colon M/\ker(f) \to \im(f)$ is the isomorphism~$\class{m} \mapsto f(m)$.
\end{example*}


\begin{remark*}[Functoriality of the (co)image]
  \label{functoriality of (co)image}
  Let~$\Ccat$ be a category that is preadditive, or that has a zero object, and that has kernels and cokernels.
  It follows from the functoriality of the (co)kernel (as discussed in \cref{functoriality of (co)kernel}) that images and coimages are also functorial:
  Let~$f \colon X \to Y$ and~$f' \colon X' \to Y'$ be two morphisms in~$\Ccat$.
  \begin{enumerate}
    \item
      Let~$i \colon \im(f) \to Y$ and~$i' \colon \im(f') \to Y'$ be images of~$f$ and~$f'$.
      If~$f$ and~$f'$ fit into a commutative square
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow[dashed]{d}[left]{h}
          & Y
            \arrow[dashed]{d}[right]{h''}
          \\
            X'
            \arrow{r}[above]{f'}
          & Y'
        \end{tikzcd}
      \]
      then there exists a unique morphism~$h' \colon \im(f) \to \im(f')$ that makes the following square commute:
      \[
        \begin{tikzcd}
            \im(f)
            \arrow{r}[above]{i}
            \arrow[dashed]{d}[left]{h'}
          & Y
            \arrow{d}[right]{h''}
          \\
            \im(f')
            \arrow{r}[above]{i'}
          & Y'
        \end{tikzcd}
      \]
      To show the existence of~$h'$ let~$c \colon Y \to \coker(f)$ and~$c' \colon Y' \to \coker(f')$ be cokernels of~$f$, respectively~$f'$, so that~$i$ is a kernel of~$c$ and~$i'$ is a kernel of~$c'$.
      Then there exists by the functoriality of the cokernel a unique morphism~$\bar{h} \colon \coker(f) \to \coker(f')$ that makes the diagram
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow{d}[left]{h}
          & Y
            \arrow{r}[above]{c}
            \arrow{d}[right]{h''}
          & \coker(f)
            \arrow[dashed]{d}[right]{\bar{h}}
          \\
            X'
            \arrow{r}[above]{f'}
          & Y'
            \arrow{r}[above]{c'}
          & \coker(f')
        \end{tikzcd}
      \]
      commute.
      By applying the functoriality of the kernel to the right square, it follows that there exists a unique morphism~$h' \colon \im(f) \to \im(f')$ that makes the diagram
      \[
        \begin{tikzcd}
            \im(f)
            \arrow{r}[above]{i}
            \arrow[dashed]{d}[left]{h'}
          & Y
            \arrow{r}[above]{c}
            \arrow{d}[right]{h''}
          & \coker(f)
            \arrow{d}[right]{\bar{h}}
          \\
            \im(f')
            \arrow{r}[above]{i'}
          & Y'
            \arrow{r}[above]{c'}
          & \coker(f')
        \end{tikzcd}
      \]
      commute.
      This shows the existence of~$h'$.
      The uniqueness of~$h'$ follows from the uniqueness of~$h'$ in the above construction;
      it also follows from~$h'$ being uniquely determined by the composition~$i' h' = h'' i$ because~$i'$ is a monomorphism.
      
      This induced morphism between images is functorial and additive in the following sense:
      \begin{itemize}
        \item
          The morphism~$\im(f) \to \im(f)$ that results from the commutative square
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\id_X}
              & Y
                \arrow[dashed]{d}[right]{\id_Y}
              \\
                X
                \arrow{r}[above]{f}
              & Y
            \end{tikzcd}
          \]
          is the identity~$\id_{\im(f)}$.
%           Indeed, the diagram
%           \[
%             \begin{tikzcd}
%                 \im(f)
%                 \arrow{r}[above]{i}
%                 \arrow{d}[left]{\id_{\im(f)}}
%               & Y
%                 \arrow{d}[right]{\id_Y}
%               \\
%                 \im(f)
%                 \arorw{r}[above]{i}
%               & Y
%             \end{tikzcd}
%           \]
%           commutes, and hence~$\id_{\im(f)}$ satisfies the defining property of the induced morphism.
        \item
          Suppose that we are given another morphism~$f'' \colon X'' \to Y''$, and that the morphisms~$f$,~$f'$ and~$f''$ fits into a commutative diagram of the following form:
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{h}
              & Y
                \arrow[dashed]{d}[right]{h''}
              \\
                X'
                \arrow{r}[above]{f'}
                \arrow[dashed]{d}[left]{g}
              & Y'
                \arrow[dashed]{d}[right]{g''}
              \\
                X''
                \arrow{r}[above]{f''}
              & Y''
            \end{tikzcd}
          \]
          Let~$i'' \colon \im(f'') \to Y''$ be an image of~$f''$ and let~$g' \colon \im(f') \to \im(f'')$ be the morphism induced by lower commutative square of the above diagram.
          Then the composition~$g' \circ h' \colon \im(f) \to \im(f'')$ is the morphism that is induced by the outer commutative square, i.e., by the following commutative square:
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{g \circ h}
              & Y
                \arrow[dashed]{d}[right]{g'' \circ h''}
              \\
                X''
                \arrow{r}[above]{f''}
              & Y''
            \end{tikzcd}
          \]
        \item
          Suppose that the category~$\Ccat$ is preadditive and that~$g \colon X \to X'$ and~$g'' \colon Y \to Y'$ is another pair of morphisms in~$\Ccat$ that make the square
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{g}
              & Y
                \arrow[dashed]{d}[right]{g''}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
          \]
          commute, and let~$g' \colon \im(f) \to \im(f')$ be the resulting induced morphism between images.
          Then the square
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{h + g}
              & Y
                \arrow[dashed]{d}[right]{h'' + g''}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
          \]
          again commutes, and resulting induced morphism~$\im(f) \to \im(f')$ is precisely the sum~$h' + g'$.
%           Indeed, we have the following commutative diagram:
%           \[
%             \begin{tikzcd}
%                 X
%                 \arrow{r}[above]{f}
%                 \arrow{d}[left]{h}
%               & Y
%                 \arrow{d}[right]{h''}
%               \\
%                 X'
%                 \arrow{r}[above]{f'}
%                 \arrow{d}[left]{g}
%               & Y'
%                 \arrow{d}[right]{g''}
%               \\
%                 X''
%                 \arrow{r}[above]{f''}
%               & Y''
%             \end{tikzcd}
%           \]
      \end{itemize}
      This claimed functoriality and additivity of the induced morphism follow via the above explicit construction of the induced morphism from functoriality of the (co)kernel, as explained in \cref{functoriality of (co)kernel}.
    \item
      Dually, if~$p \colon X \to \coim(f)$ and~$p' \colon X' \to \coim(f')$ are coimages of~$f$ and~$f'$ then there exists a unique morphism~$\bar{h} \colon \coim(f) \to \coim(f')$ that makes the following square commute:
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{p}
            \arrow{d}[left]{h}
          & \coim(f)
            \arrow[dashed]{d}[right]{\bar{h}}
          \\
            X'
            \arrow{r}[above]{p'}
          & \coim(f')
        \end{tikzcd}
      \]
      This induced morphism between coimages is functorial and additive in the following sense:
      \begin{itemize}
        \item
          The morphism~$\coim(f) \to \coim(f)$ that results from the commutative square
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{\id_X}
              & Y
                \arrow[dashed]{d}[right]{\id_Y}
              \\
                X
                \arrow{r}[above]{f}
              & Y
            \end{tikzcd}
          \]
          is the identity~$\id_{\coim(f)}$.
        \item
          Suppose that we are given another morphism~$f'' \colon X'' \to Y''$, and that the morphisms~$f$,~$f'$ and~$f''$ fits into a commutative diagram of the following form:
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{h}
              & Y
                \arrow[dashed]{d}[right]{h''}
              \\
                X'
                \arrow{r}[above]{f'}
                \arrow[dashed]{d}[left]{g}
              & Y'
                \arrow[dashed]{d}[right]{g''}
              \\
                X''
                \arrow{r}[above]{f''}
              & Y''
            \end{tikzcd}
          \]
          Let~$p'' \colon X'' \to \coim(f'')$ be a coimage of~$f''$ and let~$g' \colon \coim(f') \to \coim(f'')$ be the morphism induced by lower commutative square of the above diagram.
          Then the composition~$g' \circ h' \colon \coim(f) \to \coim(f'')$ is the morphism that is induced by the outer commutative square, i.e., by the following commutative square:
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{g \circ h}
              & Y
                \arrow[dashed]{d}[right]{g'' \circ h''}
              \\
                X''
                \arrow{r}[above]{f''}
              & Y''
            \end{tikzcd}
          \]
        \item
          Suppose that the category~$\Ccat$ is preadditive and that~$g \colon X \to X'$ and~$g'' \colon Y \to Y'$ is another pair of morphisms in~$\Ccat$ that make the square
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{g}
              & Y
                \arrow[dashed]{d}[right]{g''}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
          \]
          commute, and let~$g' \colon \coim(f) \to \coim(f')$ be the resulting induced morphism.
          Then the square
          \[
            \begin{tikzcd}
                X
                \arrow{r}[above]{f}
                \arrow[dashed]{d}[left]{h + g}
              & Y
                \arrow[dashed]{d}[right]{h'' + g''}
              \\
                X'
                \arrow{r}[above]{f'}
              & Y'
            \end{tikzcd}
          \]
          again commutes, and resulting induced morphism~$\coim(f) \to \coim(f')$ is precisely the sum~$h' + g'$.
      \end{itemize}
    \item
      These induced morphisms between images and coimages are compatible with the canonical factorization from \cref{canonical factorization} in the sense that for every commutative square
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow[dashed]{d}[left]{h}
          & Y
            \arrow[dashed]{d}[right]{h''}
          \\
            X'
            \arrow{r}[above]{f'}
          & Y'
        \end{tikzcd}
      \]
      the following diagram commutes:
      \[
        \begin{tikzcd}
            X
            \arrow{rrr}[above]{f}
            \arrow{dr}[below left]{p}
            \arrow[dashed]{dd}[left]{h}
          & {}
          & {}
          & Y
            \arrow[dashed]{dd}[right]{h''}
          \\
            {}
          & \coim(f)
            \arrow{r}[above]{\tilde{f}}
          & \im(f)
            \arrow{ur}[below right]{i}
          & {}
          \\
            X'
            \arrow{rrr}[above]{f'}
            \arrow{dr}[below left]{p'}
          & {}
          & {}
          & Y'
          \\
            {}
          & \coim(f')
            \arrow[from=uu, dashed, crossing over, "\bar{h}", swap, near start]
            \arrow{r}[above]{\tilde{f}'}
          & \im(f')
            \arrow[from=uu, dashed, crossing over, "h'", right, near start]
            \arrow{ur}[below right]{i'}
          & {}
        \end{tikzcd}
      \]
      Indeed, the trapezoid on the top commutes by definition of~$\tilde{f}$, the trapezoid on the bottom commutes by definition of~$\tilde{f}'$, the square on the left commutes by definition of~$\bar{h}$, the square on the right commutes by definition of~$h'$, and the rectangle in the back commutes by assumption.
      It follows that the front square commutes.
      Indeed, it follows that
      \[
          i' h' \tilde{f} p
        = h'' i \tilde{f} p
        = h'' f
        = f' h
        = i' \tilde{f}' p' h
        = i' \tilde{f}' \bar{h} p \,,
      \]
      and hence~$h' \tilde{f} = \tilde{f}' \bar{h}$ because~$p$ is an epimorphism and~$i'$ is a monomorphism.
      
      It follows that also the following diagrams commute, where the unlabeled arrows are the ones from the \hyperref[canonical factorization]{canonical factorization lemma}.
      \[
        \begin{tikzcd}[sep = small]
            X
            \arrow{rrr}[above]{f}
            \arrow{dr}[below left]{p}
            \arrow{dd}[left]{h}
          & {}
          & {}
          & Y
            \arrow{dd}[right]{h''}
          \\
            {}
          & \coim(f)
            \arrow{urr}
          & {}
          & {}
          \\
            X'
            \arrow{rrr}[above, near end]{f'}
            \arrow{dr}[below left]{p'}
          & {}
          & {}
          & Y'
          \\
            {}
          & \coim(f')
            \arrow[from=uu, crossing over, "\bar{h}", swap, very near start]
            \arrow{urr}
          & {}
          & {}
        \end{tikzcd}
        \quad\quad
        \begin{tikzcd}[sep = small]
            X
            \arrow{rrr}[above]{f}
            \arrow{drr}
            \arrow{dd}[left]{h}
          & {}
          & {}
          & Y
            \arrow{dd}[right]{h''}
          \\
            {}
          & {}
          & \im(f)
            \arrow{ur}[below right]{i}
          & {}
          \\
            X'
            \arrow{rrr}[above, near start]{f'}
            \arrow{drr}
          & {}
          & {}
          & Y'
          \\
            {}
          & {}
          & \im(f')
            \arrow[from=uu, crossing over, "h'", right, very near start]
            \arrow{ur}[below right]{i'}
          & {}
        \end{tikzcd}
      \]
  \end{enumerate}
\end{remark*}


\begin{example*}
  Let~$A$ be a~{\kalg} and let~$f \colon X \to Y$ and~$f' \colon X' \to Y'$ be two homomorphisms of~{\modules{$A$}} that fit into a commutative square:
  \[
    \begin{tikzcd}
        X
        \arrow{r}[above]{f}
        \arrow{d}[left]{h}
      & Y
        \arrow{d}[right]{h''}
      \\
        X'
        \arrow{r}[above]{f'}
      & Y'
    \end{tikzcd}
  \]
  Then~$h''(\im(f)) \subseteq \im(f')$, and hence the homomorphism~$h''$ restricts to a homomorphism~$h' \colon \im(f) \to \im(f')$.
  It similarly holds that the homomorphism~$h$ induces a {\welldef} homomorphism~$\bar{h} \colon X/\ker(f) \to X'/\ker(f')$ that is given on residue classes by~$\bar{h}(\class{x}) = \class{h(x)}$ for every~$\class{x} \in X/\ker(f)$.
\end{example*}




