\section{Abelian Categories}


\begin{definition}
  An \emph{abelian category}\index{abelian category}\index{category!abelian} is an additive category~$\Acat$ that has kernels and cokernels and in which for every morphism~$f \colon X \to Y$ the induced morphism~$\tilde{f} \colon \coim(f) \to \im(f)$ from the \hyperref[canonical factorization]{canonical factorization lemma} is an isomorphism.
\end{definition}


\begin{remark*}
  Let~$\Acat$ be a category.
  We have previously seen that \enquote{being additive} is a property of~$\Acat$.
  It follows that \enquote{being abelian} is also a property of~$\Acat$.
\end{remark*}


\begin{remark}
  \leavevmode
  \begin{enumerate}
    \item
      A category~$\Acat$ is abelian if and only if its dual category~$\Acat^\op$ is abelian.
    \item
      If $\Acat$ is an abelian category, then we will for~$X, Y \in \Ob(\Acat)$ often write~$\Hom_\Acat(X,Y)$ instead of~$\Acat(X,Y)$.
    \item
      If~$F \colon \Acat \to \Bcat$ is an equivalence of categories and~$\Acat$ is abelian, then~$\Bcat$ is also abelian.%
      \footnote{In the lecture it was instead stated that one can \enquote{use~$F$ to make~$\Bcat$ into an abelian category}.
      It was then sketched how one can use~$F$ to transfer the group structure on the morphism sets of~$\Acat$ to a group structure of the morphism sets of~$\Bcat$;
      one can  then check that~$F$ respects biproducts, kernels and cokernels (this was not proven in the lecture).
      The author finds this presentation somewhat misleading, as \enquote{being abelian} is really a property of a category, and not an additional structure.
      Hence, we donâ€™t \enquote{make} a category abelian, it \emph{is} abelian.}
%     TODO: Prove this.
  \end{enumerate}
\end{remark}


\begin{example}
  \leavevmode
  \begin{enumerate}
    \item
      The category~$\Ab$ of abelian groups is an abelian category.
    \item
      If more generally~$A$ is a~{\kalg}, then the module categories~$\Modl{A}$ and~$\Modr{A}$ are abelian.
    \item
      If~$G$ is a group then the category~$\Rep{k}{G}$ is equivalent to the module category~$\Modl{\kf[G]}$ and hence abelian.
    \item
      If~$A$ is a left noetherian ring then the additive category~$\Modlfg{A}$ of finitely generated left~{\modules{$A$}} is again abelian:
      
      Let~$f \colon M \to N$ be a homomorphism of~{\modules{$A$}} where both~$M$ and~$N$ are finitely generated.
      Then the submodule~$\ker(f) \subseteq M$ is again finitely generated because~$M$ is noetherian (since finitely generated modules over noetherian rings are noetherian themselves), and the quotient module~$N/f(M)$ is also again finitely generated.
      We can therefore utilize for~$\Modlfg{A}$ the usual kernels and cokernels.
      
      The analogous statement and argumentation also holds for~$\Modrfg{A}$, the category of finitely generated right~{\modules{$A$}}.
    \item
      Let~$A$ be a {\fd}~{\kalg} over a field~$\kf$.
      Then the category~$\Modlfd{A}$ of {\fd} left~{\modules{$A$}} coincides with the category~$\Modlfg{A}$ of finitely generated left~{\modules{$A$}}, and is hence abelian.
      The analogous observation holds for~$\Modrfd{A}$, the category of {\fd} right~{\modules{$A$}}.
    \item
      If~$\Ccat$ is a category and~$\Acat$ is an abelian category then the functor category~$\Fun(\Ccat, \Acat)$ is again abelian.
  \end{enumerate}
\end{example}


\begin{example*}
  If~$\Acat$ is any abelian category then the morphism category~$\Mor(\Acat)$ is again abelian since it is a functor category, as seen in \cref{morphism category is a functor category}.
\end{example*}


\begin{remark*}
  If~$\Acat$ is an abelian category and~$f \colon X \to Y$ is a morphism in~$\Acat$ that is both a monomorphism and an epimorphism, then~$f$ is already an isomorphism.
  This will be shown in \cref{iso iff epi and mono}.
%   
%   The zero morphism~$0 \to X$ is a kernel of~$f$ because~$f$ is a monomorphism.
%   The identity~$\id_X \colon X \to X$ is a cokernel of the zero morphism~$0 \to X$, and hence a coimage of~$f$.
%   We find dually that the identity~$\id_Y \colon Y \to Y$ is an image of~$f$ because~$f$ is an epimorphism.
%   The induced morphism~$f \colon \coim(f) \to \im(f)$ of the \hyperref[canonical factorization]{canonical factorization lemma} is just~$f$ itself because the square
%   \[
%     \begin{tikzcd}
%         X
%         \arrow{r}[above]{f}
%         \arrow{d}[left]{\id_X}
%       & Y
%       \\
%         X 
%         \arrow{r}[above]{f}
%       & Y
%         \arrow{u}[right]{\id_Y}
%     \end{tikzcd}
%   \]
%   commutes.
%   It hence follows from the definition of an abelian category that~$f$ is an isomorphism.
\end{remark*}


\begin{example}[Non-example]
  Consider the category~$F^* \Ab$ of filtered abelian groups:
  The objects of~$F^* \Ab$ are pairs~$(A,F^*)$ consisting of an abelian group~$A$ and an increasing \dash{$\Integer$}{filtration}~$F^*$ on~$A$, i.e., an increasing sequence
  \[
              \dotsb
    \subseteq F^{i-1}(A)
    \subseteq F^i(A)
    \subseteq F^{i+1}(A)
    \subseteq \dotsb
  \]
  of subgroups~$F^i(A) \subseteq A$ with~$i \in \Integer$.
  A morphism~$f \colon (A, F^*) \to (B,G^*)$ in~$F^* \Ab$ is a group homomorphism~$f \colon A \to B$ with~$f(F^i(A)) \subseteq G^i(B)$ for every~$i \in \Integer$.
  The category~$F^* \Ab$ is additive and has kernels and cokernels:
  If~$f \colon (A,F^*) \to (B,G^*)$ is a morphism in~$F^* \Ab$ then a kernel of~$f$ is given by
  \[
      \ker_{F^* \Ab}(f)
    = ( \ker_{\Ab}(f), ( F^i(A) \cap \ker_{\Ab}(f) )_{i \in \Integer} ) \,,
  \]
  and a cokernel of~$f$ is given by
  \[
      \coker_{F^* \Ab}(f)
    = ( \coker_{\Ab}(f), ( (F^i(B) + f(A))/f(A) )_{i \in \Integer} ) \,.
  \]
  
  Let now~$A$ be an abelian group and suppose that~$F^*$ and~$\tilde{F}^*$ are two filtrations on~$A$ such that~$F_i(A) \subseteq \tilde{F}_i(A)$ for all~$i \in \Integer$, but~$F_j(A) \subsetneq \tilde{F}_j(A)$ for some~$j \in \Integer$.
  (One can for example choose any non-trivial abelian group~$A$ and define such filtrations via
  \[
      F_i(A)
    = \begin{cases}
        0 & \text{if~$i < 1$} \,, \\
        A & \text{if~$i \geq 1$}  \,,
      \end{cases}
    \qquad\text{and}\qquad
      \tilde{F}_i(A)
    = \begin{cases}
        0 & \text{if~$i < 0$} \,, \\
        A & \text{if~$i \geq 0$}  \,.
      \end{cases}
  \]
  Then both filtrations agree except for~$F_0(A) = 0 \subsetneq A = F_1(A)$.)
  We can now regard the identity~$\id_A$ as a morphism~$f \colon (A, F^*) \to (A, \tilde{F}^*)$.
  It then follows from~$\ker_{\Ab}(f) = 0$ and~$\coker_{\Ab}(f) = 0$ that~$\ker_{F^* \Ab}(f) = 0$ and~$\coker_{F^* \Ab}(f) = 0$ by the above explicit construction of kernels and cokernels in~$F^* \Ab$.
  Hence,~$f$ is both a monomorphism and an epimorphism.
  But~$f$ is not an isomorphism as the filtrations of~$F^*$ and~$\tilde{F}^*$ differ, so~$F^* \Ab$ cannot be abelian.
\end{example}





\lecturend{11}



\begin{example}
  Let~$X$ be a topological space.
  We will sketch how to show that the category of sheaves of abelian groups over~$X$ is abelian.
  \begin{enumerate}
    \item
      We start with the notion of a presheaf on~$X$:
      
      \begin{definitionnonum}
        A \emph{presheaf}~$\Fs$\index{presheaf} (of abelian groups over~$X$) consists of
        \begin{itemize}
          \item
            an abelian group~$\Fs(U)$ for every open subset~$U \subseteq X$, and
          \item
            a group homomorphism~$\rho_{V,U} \colon \Fs(V) \to \Fs(U)$ for all open subsets~$U \subseteq V \subseteq X$,
        \end{itemize}
        such that
        \begin{enumerate}[label=(P\arabic*)]
          \item
            $\rho_{U,U} = \id_{\Fs(U)}$ for every open subset~$U \subseteq X$, and
          \item
            $\rho_{V,U} \circ \rho_{W,V} = \rho_{W,U}$ for all open subsets~$U \subseteq V \subseteq W \subseteq X$.
        \end{enumerate}
      \end{definitionnonum}
      
      For an open subset~$U \subseteq X$ one may think about the abelian group~$\Fs(U)$ as consisting of certain functions on~$U$ that can be added together.
      One can consequently think about the homomorphism~$\rho_{V,U} \colon \Fs(V) \to \Fs(U)$ associated to open subsets~$U \subseteq V \subseteq X$ as restricting the functions on~$V$ to the functions on~$U$.
      
      For an open subset~$U \subseteq X$, the elements of~$\Fs(U)$ are called \emph{sections}\index{section} of~$\Fs$ on~$U$.
      For open subsets~$U \subseteq V \subseteq X$, the homomorphism~$\rho_{V,U} \colon \Fs(V) \to \Fs(U)$ is the \emph{restriction homomorphism} from~$V$ to~$U$, and for a section~$s \in \Fs(V)$ one calls~$\rho_{V,U}(s) \in \Fs(U)$ the \emph{restriction} of~$s$ to~$U$.
      This restriction is also denoted by~$\restrict{s}{U}$ instead of~$\rho_{V,U}(s)$.
      We then have that
      \[
        \restrict{s}{U} = s
      \]
      for every open subset~$U \subseteq X$ and every section~$s \in \Fs(U)$, and
      \[
        \restrict{ (\restrict{s}{V}) }{U} = \restrict{s}{U}
      \]
      for all open subsets~$U \subseteq V \subseteq W \subseteq X$ and every section~$s \in \Fs(W)$.
      It also holds that
      \[
          \restrict{(s+t)}{U}
        = \restrict{s}{U} + \restrict{t}{U}
      \]
      for all open subsets~$U \subseteq V \subseteq X$ and all sections~$s, t \in \Fs(V)$  because the restriction homomorphism~$\rho_{V,U}$ is a group homomorphism.
      
      \begin{examplenonum}
        \leavevmode
        \begin{enumerate}
          \item
            For every open subset~$U \subseteq X$ let
            \[
                        \cont_X(U)
              \defined  \{
                          f \colon U \to \Real
                        \suchthat
                          \text{$f$ is continuous}
                        \} \,,
            \]
            and for all open subsets~$U \subseteq V \subseteq X$ let
            \[
                      \rho_{V,U}
              \colon  \cont_X(V)
              \to     \cont_X(U) \,,
              \quad   f
              \mapsto \restrict{f}{U}
            \]
            be the (literal) restriction homomorphism.
            This defines a presheaf~$\cont_X$ on~$X$, the \emph{presheaf of continuous functions}.
          \item
            For every abelian group~$A$ we can consider the \emph{constant~\dash{$A$}{valued} presheaf}\index{constant!presheaf}\index{presheaf!constant} on~$X$, which is denoted by~$\widetilde{\Cs}_{X,A}$ and given by~$\widetilde{\Cs}_{X,A}(U) = A$ for every open subset~$U \subseteq X$, and~$\rho_{V,U} = \id_A$ for all open subsets~$U \subseteq V \subseteq X$.
        \end{enumerate}
      \end{examplenonum}
      
      Let~$\Fs, \Gs$ be two presheaves on~$X$.
      A \emph{homomorphism}\index{homomorphism!of presheaves} of presheaves~$f \colon \Fs \to \Gs$ is a tuple~$(f_U)_{U \subseteq X}$ of group homomorphisms~$f_U \colon \Fs(U) \to \Gs(U)$, where~$U \subseteq X$ ranges through the open subsets of~$X$, such that for all open subsets~$U \subseteq V \subseteq X$ the square
      \[
        \begin{tikzcd}[sep = large]
            \Fs(V)
            \arrow{r}[above]{f_V}
            \arrow{d}[left]{\rho_{V,U}^\Fs}
          & \Gs(V)
            \arrow{d}[right]{\rho_{V,U}^\Gs}
          \\
            \Fs(U)
            \arrow{r}[above]{f_U}
          & \Gs(U)
        \end{tikzcd}
      \]
      commutes.
      Let~$\Pcat \defined \Presheaf_X(\Ab)$ be the category of presheaves on~$X$.
      
    \item
      We can interpret the presheaf category~$\Pcat$ as a functor category:
      Let~$\Xcat$ be the category defined by objects
      \[
                  \Ob(\Xcat)
        \defined  \{
                    U
                  \suchthat
                    \text{$U \subseteq X$ is open}
                  \}
      \]
      and morphism sets
      \[
                  \Xcat(U,V)
        \defined  \begin{cases}
                    \{ i_{U,V} \} & \text{if~$U \subseteq V$} \,, \\
                    \emptyset     & \text{otherwise} \,,
                  \end{cases}
      \]
      where~$i_{U,V} \colon U \to V$ is the inclusion.
      The composition of morphisms in~$\Xcat$ is defined in the only possible way.
      The presheaf category~$\Pcat$ is then equivalent to the functor category~$\Fun(\Xcat^\op, \Ab)$.
      We see from this alternative description of the presheaf category~$\Pcat$ that it is abelian.
      
      \begin{remark*}
        A \emph{preorder}\index{preorder} on a set~$P$ is a relation~$\leq$ that is reflexive and transitive, i.e., it holds that~$x \leq x$ for every~$x \in P$, and it holds for all~$x, y, z \in P$ with~$x \leq y$ and~$y \leq z$ that also~$x \leq z$.
        (But in contrast to a partial order, a preorder does not have to be antisymmetric.
        So there may exist~$x, y \in P$ with both~$x \leq y$ and~$y \leq x$ but~$x \neq y$.)
        A \emph{preordered set} is a pair~$(P,\leq)$ consisting of a set~$P$ and a preorder~$\leq$ on~$P$.
        
        If~$(P,\leq)$ is a preordered set then one can define a category~$\Pcat$ whose objects are given by the elements of~$P$, and in which there exists for every two elements~$x, y \in P$ a morphism~$x \to y$ in~$\Pcat$ if and only if~$x \leq y$, and this morphism is then unique.
        More formally speaking, we have that
        \[
            \Ob(\Pcat)
          = P \,,
        \]
        and the morphisms sets of~$\Pcat$ are for any two objects~$x, y \in P$ given by
        \[
            \Pcat(x,y)
          = \begin{cases}
              \{\ast\}  & \text{if~$x = y$} \,, \\
              \emptyset & \text{if~$x \neq y$}  \,.
            \end{cases}
        \]
        The composition of morphisms in defined in the only possible way.
        In the resulting category~$\Pcat$ there exists between any two objects at most one morphism.
        Such categories are called~\emph{thin}\index{thin category}\index{category!thin}.
        
        If on the other hand~$\Tcat$ is any thin category whose class of objects~$T \defined \Ob(\Tcat)$ is a set (and not a proper class), then one can define a preorder~$\leq$ on~$T$ via
        \[
                s \leq t
          \iff  \Tcat(s,t) \neq \emptyset
        \]
        for all~$s, t \in T$.
        This then results in a preordered set~$(T, \leq)$.
        
        These two constructions are mutually inverse, and show that preordered sets~$(P,\leq)$ are \enquote{the same} as thin categories~$\Tcat$ whose class of objects form a set.
        
        In the above example, the preordered set (that is already an ordered set) is given by~$P = \{U \subseteq X \suchthat \text{$U$ is open}\}$ together with the inclusion~$\subseteq$ as a preorder.
        The category~$\Xcat$ then results from the preordered set~$(P, \subseteq)$ via the above construction.
      \end{remark*}
      
    \item
      We are now ready to introduce sheaves:
      
      \begin{definitionnonum}
        A presheaf~$\Fs$ on~$X$ is a \emph{sheaf}\index{sheaf} if for every open subset~$U \subseteq X$ and every open cover~$\{ U_i \}_{i \in I}$ of~$U$ the following two conditions are satisfied:
        \begin{enumerate}[label=(S\arabic*)]
          \item
            \label{separation axiom}
            If~$s \in \Fs(U)$ is a section with~$\restrict{s}{U_i} = 0$ for every~$i \in I$ then already~$s = 0$.
          \item
            \label{glueing axiom}
            Suppose that~$s_i \in \Fs(U_i)$ is a section for every~$i \in I$, so that
            \[
                \restrict{s_i}{U_i \cap U_j}
              = \restrict{s_j}{U_i \cap U_j}
            \]
            for all~$i, j \in I$.
            Then there exists a section~$s \in \Fs(U)$ with~$\restrict{s}{U_i} = s_i$ for every~$i \in I$.
        \end{enumerate}
        Condition~\ref*{separation axiom} is the \emph{separation~axiom}\index{separation axiom}\index{sheaf!separation axiom} and condition~\ref*{glueing axiom} is the \emph{glueing~axiom}\index{glueing axiom}\index{sheaf!glueing axiom}.
      \end{definitionnonum}
      
      We denote by~$\Scat = \Sheaf_X(\Ab)$ the category of sheaves on~$X$, which is the full subcategory of the presheaf category~$\Pcat = \Presheaf_X(\Ab)$ whose objects are the sheaves on~$X$.
      
      Note that if~$\Fs$ is any sheaf on~$X$ then~$\Fs(\emptyset) = 0$:
      We may choose for the open subset~$U = \emptyset$ the empty covering~$U = \bigcup_{i \in \emptyset} U_i$.
      It then follows for any two sections~$s, t \in \Fs(\emptyset)$ from the separation axiom that~$s = t$, which shows that the abelian group~$\Fs(\emptyset)$ consists of only a single element.
      
      \begin{examplenonum}
        \leavevmode
        \begin{enumerate}
          \item
            The presheaf of continuous functions~$\cont_X$ is already a sheaf.
          \item
            If~$A$ is a nonzero abelian group then the constant presheaf~$\widetilde{\Cs}_{X,A}$ is not a sheaf, because~$\widetilde{\Cs}_{X,A}(\emptyset) = A \neq 0$.
        \end{enumerate}
      \end{examplenonum}
      
    \item
      The sheaf category~$\Scat$ is additive:
      \begin{description}[font=\bfseries]
        \item[Preadditive:]
          The sheaf category~$\Scat$ is a full subcategory of the presheaf category~$\Pcat$, which is a preadditive category.
          It therefore inherits the structure of a preadditive category from~$\Pcat$.
          Note that the inclusion functor~$I \colon \Scat \to \Pcat$ is additive.
        \item[Zero object:]
          The zero presheaf~$0$ is already a sheaf, and hence contained in~$\Scat$.
          It is also a zero object in~$\Scat$ because~$\Scat$ is a full subcategory of~$\Pcat$.
        \item[Biproducts:]
          The biproduct~$\Fs \oplus \Gs$ of two presheaves~$\Fs$ and~$\Gs$ in the presheaf category~$\Pcat$ is given by
          \[
              (\Fs \oplus \Gs)(U)
            = \Fs(U) \oplus \Gs(U)
          \]
          for every open subset~$U \subseteq X$, together with the restriction homomorphisms
          \[
              \rho^{\Fs \oplus \Gs}_{V,U}
            = \rho^\Fs_{V,U} \oplus \rho^\Gs_{V,U}
          \]
          for all open subsets~$U \subseteq V \subseteq X$, i.e.,
          \[
              \restrict{(s,t)}{U}
            = ( \restrict{s}{U}, \restrict{t}{U} )
          \]
          for every section ~$(s,t) \in \Fs(U) \oplus \Gs(U)$.
          
          If both~$\Fs$ and~$\Gs$ are sheaves, then their biproduct~$\Fs \oplus \Gs$ is again a sheaf:
          Let~$U \subseteq X$ be an open subset and let~$\{ U_i \}_{i \in I}$ be an open cover of~$U$.
          \begin{enumerate}[label=(S\arabic*)]
            \item
              Let~$s \in \Fs(U) \oplus \Gs(U)$ be a section with~$\restrict{s}{U_i} = 0$ for every~$i \in I$.
              We may write~$s = (t,u)$ for some sections~$t \in \Fs(U)$ and~$u \in \Gs(U)$, and it holds for every~$i \in I$ that
              \[
                  0
                = \restrict{s}{U_i}
                = \restrict{(t,u)}{U_i}
                = ( \restrict{t}{U_i}, \restrict{u}{U_i} ) \,.
              \]
              It therefore holds for every~$i \in I$ that~$\restrict{t}{U_i} = 0$ and~$\restrict{u}{U_i} = 0$.
              It follows that~$t = 0$ and~$u = 0$ because both~$\Fs$ and~$\Gs$ are sheaves (and hence satisfy the separation axiom).
              This shows that~$s = 0$, and hence that~$\Fs \oplus \Gs$ satisfies the separation axiom.
            \item
              For every~$i \in I$ let~$s_i \in U_i$ be a section, such that
              \[
                  \restrict{s_i}{U_i \cap U_j}
                = \restrict{s_j}{U_i \cap U_j}
              \]
              for all~$i,j \in I$.
              Then every~$s_i$ can be written as~$s_i = (t_i, u_i)$ for some sections~$t_i \in \Fs(U_i)$ and~$u_i \in \Gs(U_i)$, and it holds for all~$i, j \in I$ that
              \begin{align*}
                    (\restrict{t_i}{U_i \cap U_j}, \restrict{u_i}{U_i \cap U_j})
                &=  \restrict{(t_i, u_i)}{U_i \cap U_j}
                 =  \restrict{s_i}{U_i \cap U_j}  \\
                &=  \restrict{s_j}{U_i \cap U_j}
                 =  \restrict{(t_j, u_j)}{U_i \cap U_j}
                 =  (\restrict{t_j}{U_i \cap U_j}, \restrict{u_j}{U_i \cap U_j}) \,.
              \end{align*}
%               \begin{align*}
%                  {}&  ( \restrict{s^i_1}{U_i \cap U_j}, \dotsc, \restrict{s^i_n}{U_i \cap U_j} )  \\
%                 ={}&  \restrict{(s^i_1, \dotsc, s^i_n)}{U_i \cap U_j} \\
%                 ={}&  \restrict{s^i}{U_i \cap U_j}
%                 =     \restrict{s^j}{U_i \cap U_j}  \\
%                 ={}&  \restrict{(s^j_1, \dotsc, s^j_n)}{U_i \cap U_j} \\
%                 ={}&  ( \restrict{s^j_1}{U_i \cap U_j}, \dotsc, \restrict{s^j_n}{U_i \cap U_j} )
%               \end{align*}
              It therefore holds for all~$i, j \in I$ that
              \[
                  \restrict{t_i}{U_i \cap U_j}
                = \restrict{t_j}{U_i \cap U_j}
                \quad\text{and}\quad
                  \restrict{u_i}{U_i \cap U_j}
                = \restrict{u_j}{U_i \cap U_j} \,.
              \]
              It follows that there exist sections~$t \in \Fs(U)$ and~$u \in \Gs(U)$ with~$\restrict{t}{U_i} = t_i$ and~$\restrict{u}{U_i} = u_i$ for every~$i \in I$ because both~$\Fs$ and~$\Gs$ are sheaves (and hence satisfy the glueing axiom).
              It follows for the section~$s \defined (t,u) \in (\Fs \oplus \Gs)(U)$ that
              \[
                  \restrict{s}{U_i}
                = \restrict{(t,u)}{U_i}
                = ( \restrict{t}{U_i}, \restrict{u}{U_i} )
                = ( t_i, u_i )
                = s_i
              \]
              for every~$i \in I$.
              This shows that~$\Fs \oplus \Gs$ satisfies the glueing axiom.
          \end{enumerate}
          
          This shows together that the biproduct~$\Fs \oplus \Gs$ is contained in~$\Scat$.
          The sheaf~$\Fs \oplus \Gs$ is also a biproduct of~$\Fs$ and~$\Gs$ in~$\Scat$ because~$\Scat$ is a full subcategory of~$\Pcat$.
          
          This shows that~$\Scat$ admits binary biproducts;
          it follows inductively that~$\Scat$ admits biproducts~$\Fs_1 \oplus \dotsb \oplus \Fs_n$ for any collections of sheaves~$\Fs_1, \dotsc, \Fs_n$ with~$n \geq 1$.
          For~$n = 0$ this is also true because~$\Scat$ contains a zero object.
      \end{description}
      
      This shows altogether that the sheaf category~$\Scat$ is indeed additive.
          
    \item
      The sheaf category~$\Scat$ admits kernels:
      To be more precise, let~$\Fs$ and~$\Gs$ be two sheaves and let~$f \colon \Fs \to \Gs$ be a homomorphism of sheaves.
      We may forget that~$\Fs$ and~$\Gs$ are sheaves and regard them as just presheaves;
      then~$f$ is a homomorphism of presheaves, and hence a homomorphism in the abelian category~$\Pcat$.
      We can therefore consider its kernel~$\ker_{\Pcat}(f)$ in the category~$\Pcat$.
      
      This kernel~$\ker_\Pcat(f)$ of~$f$ in the presheaf category~$\Pcat$ is already a sheaf:
      The kernel~$\ker_\Pcat(f)$ is given by
      \[
          (\ker_\Pcat(f))(U)
        = \ker(f_U)
      \]
      for every open subset~$U \subseteq X$, together with the restriction homomorphisms
      \[
        \rho^{\ker_{\Pcat}(f)}_{V,U} \colon \ker(f_V) \to \ker(f_U)
      \]
      for all open subsets~$U \subseteq V \subseteq X$ that are given by restriction of the restriction homomorphisms~$\rho^{\Fs}_{V,U} \colon \Fs(V) \to \Fs(U)$.
      Let~$U \subseteq X$ be open and let~$\{ U_i \}_{i \in I}$ be an open cover of~$U$.
      \begin{enumerate}[label=(S\arabic*)]
        \item
          Let~$s \in (\ker_{\Pcat}(f))(U) = \ker(f_U)$ be a section with~$\restrict{s}{U_i} = 0$ for every~$i \in I$.
          This section~$s$ is an element of~$\Fs(U)$ (because~$\ker(f_U)$ is a subgroup of~$\Fs(U)$), and the relation~$\restrict{s}{U_i} = 0$ also holds in the sheaf~$\Fs$ (i.e., it follows from~$\rho^{\ker_{\Pcat}(f)}_{U,U_i}(s) = 0$ that also~$\rho^{\Fs}_{U,U_i}(s) = 0$) because the square
          \[
            \begin{tikzcd}[sep = large]
                \ker(f_U)
                \arrow[hook]{r}
                \arrow{d}[left]{\rho_{U,U_i}}
              & \Fs(U)
                \arrow{d}[right]{\rho_{U,U_i}}
              \\
                \ker(f_{U_i})
                \arrow[hook]{r}
              & \Fs(U_i)
            \end{tikzcd}
          \]
          commutes.
          It follows that~$s = 0$ in~$\Fs(U)$, and hence also in~$\ker(f_U)$, because~$\Fs$ is a sheaf and hence satisfies the separation axiom.
          This shows that the presheaf~$\ker_{\Pcat}(f)$ satisfies the separation axiom.
        \item
          For every~$i \in I$ let~$s_i \in (\ker_{\Pcat}(f))(U_i) = \ker(f_{U_i})$ be a section such that~$\restrict{s_i}{U_i \cap U_j} = \restrict{s_j}{U_i \cap U_j}$ for all~$i,j \in I$.
          We can then regard every~$s_i$ as an element of~$\Fs(U_i)$, and the relation~$\restrict{s_i}{U_i \cap U_j} = \restrict{s_i}{U_i \cap U_j}$ also holds in the sheaf~$\Fs$ because the diagram
          \[
            \begin{tikzcd}[column sep = huge, row sep = tiny]
                \ker(f_{U_i})
                \arrow{dr}[above right, near start]{\rho_{U_i, U_i \cap U_j}}
                \arrow[hook]{dd}
              & {}
              & \ker(f_{U_j})
                \arrow{dl}[above left, near start]{\rho_{U_j, U_i \cap U_j}}
                \arrow[hook]{dd}
              \\
                {}
              & \ker(f_{U_i \cap U_j})
                \arrow[hook]{dd}
              & {}
              \\
                \Fs(U_i)
                \arrow{dr}[below left, near end]{\rho_{U_i, U_i \cap U_j}}
              & {}
              & \Fs(U_j)
                \arrow{dl}[below right, near end]{\rho_{U_j, U_i \cap U_j}}
              \\
                {}
              & \Fs(U_i \cap U_j)
              & {}
            \end{tikzcd}
          \]
          commutes.
          It follows that there exists a section~$s \in \Fs(U)$ with~$\restrict{s}{U_i} = s_i$ for every~$i \in I$ because~$\Fs$ is a sheaf and hence satisfies the glueing axiom.
          We need to show that already~$s \in \ker(f_U)$, i.e., that~$f_U(s) = 0$.
          We use that~$f$ is a homomorphism of sheaves to calculate
          \[
              \restrict{f_U(s)}{U_i}
            = f_{U_i}( \restrict{s}{U_i} )
            = f_{U_i}(s_i)
            = 0
          \]
          for every~$i \in I$.
          It follows that~$f_U(s) = 0$ because~$\Gs$ is a sheaf and hence satisfies the separation axiom.
          This shows that~$\ker(f)$ satisfies the glueing axiom.
      \end{enumerate}
      
      We can similarly consider the cokernel~$\coker_{\Pcat}(f)$.
      This presheaf is given by
      \[
        (\coker_{\Pcat}(f))(U) = \coker(f_U)
      \]
      for every open subset~$U \subseteq X$, and the restriction homomorphism
      \[
                \rho^{\coker_{\Pcat}(f)}_{V,U}
        \colon  \Gs(V)
        \to     \Gs(U)
      \]
      is for all open subsets~$U \subseteq V \subseteq X$ induced by the restriction homomorphism~$\rho^{\Gs}_{V,U} \colon \Gs(V) \to \Gs(U)$ in the sense that the following square commutes:
      \[
        \begin{tikzcd}[sep = large]
            \Gs(V)
            \arrow[two heads]{r}
            \arrow{d}[left]{\rho_{V,U}}
          & \coker^{\Pcat}(f_V)
            \arrow{d}[right]{\rho_{V,U}}
          \\
            \Gs(U)
            \arrow[two heads]{r}
          & \coker^{\Pcat}(f_U)
        \end{tikzcd}
      \]
      
      In contrast to kernels, it does not necessarily hold that the cokernel~$\coker_{\Pcat}(f)$ is already a sheaf.
      
      \begin{examplenonum}
        Let~$X \defined \sphere^1$ and let~$\Fs \defined \Gs \defined \Cs^\infty$ be the sheaf of smooth \dash{real}{valued} functions on~$\sphere^1$, that is given by
        \[
            \Cs^\infty(U)
          = \{
              f \colon U \to \Real
            \suchthat
              \text{$f$ is smooth}
            \}
        \]
        for every open subset~$U \subseteq \sphere^1$ and has for all open subsets~$U \subseteq V \subseteq \sphere^1$ as restriction homomorphisms
        \[
                  \rho_{V,U}
          \colon  \Cs^\infty(V)
          \to     \Cs^\infty(U) \,,
          \quad   f
          \mapsto \restrict{f}{U}
        \]
        the (literal) restriction maps.

        Let us consider the homomorphism~$d \colon \Cs^\infty \to \Cs^\infty$ that is given by the derivative, i.e., by
        \[
                  d_U
          \colon  \Cs^\infty(U)
          \to     \Cs^\infty(U) \,,
          \quad   f
          \mapsto f'
        \]
        for every open subset~$U \subseteq \sphere^1$.
        If~$U \subsetneq \sphere^1$ is a proper open subset then~$U$ corresponds to an open subset of~$(0,1)$, hence there exists for every~$f \in \Cs^\infty(U)$ an antiderivative for~$f$ on~$U$.
        The homomorphism~$d_U \colon \Cs^\infty(U) \to \Cs^\infty(U)$ is hence surjective, and has therefore the cokernel
        \[
            \coker(d_U)
          = 0 \,.
        \]
        Consider on the other hand the open subset~$U = S^1$.
        On this open subset, the constant~\dash{$1$}{function}~$1 \in \Cs^\infty(\sphere^1)$ has no antiderivative because it lifts to the constant~\dash{$1$}{function}~$1 \in \Cs^\infty(\Real)$, whose antiderivatives~$x \mapsto x + c$ with~$c \in \Real$ are not periodic.
        The homomorphism~$d_{\sphere^1}$ does therefore have a non-vanishing cokernel
        \[
                \coker(f_{\sphere^1})
          \neq  0 \,.
        \]
        (One can actually identify the cokernel~$\coker(f_{\sphere^1})$ with the constant functions on~$\sphere^1$, so that~$\coker(f_{\sphere^1}) \cong \Real$.)
        Let~$\sphere^1 = U_1 \cup U_2$ be an open cover by proper open subsets~$U_1, U_2 \subsetneq \sphere^1$.
        If~$\coker(d)$ were a sheaf, then it would follow from~$\coker(d_{U_1}) = 0$ and~$\coker(d_{U_2}) = 0$ by the separation axiom that also~$\coker(d_{\sphere^1}) = 0$.
        Hence,~$\coker(d)$ is not a sheaf.
      \end{examplenonum}
      
    \item
      Let~$I \colon \Scat \to \Pcat$ be the inclusion functor, which is both fully faithful and additive.
      
      \begin{fact}
        The inclusion functor~$I$ has a left adjoint~$S \colon \Pcat \to \Scat$.
        The functor~$S$ is again additive, and the adjunction is also additive, in the sense that the natural bijections
        \[
                  \varphi_{\Fs,\Gs}
          \colon  \Scat(S(\Fs), \Gs)
          \to     \Pcat(\Fs, I(\Gs))
        \]
        are isomorphisms of abelian groups.
      \end{fact}
      
      \begin{definitionnonum}
        For a presheaf~$\Fs$ on~$X$, the sheaf~$S(\Fs)$ is the \emph{sheafification}\index{sheafification} of~$\Fs$.
      \end{definitionnonum}
      
      Let~$\eta \colon \id_{\Pcat} \to I \circ S$ be the unit of the adjunction~$(S,I,\varphi)$.
      This adjunction then states the sheafification has the following universal property:
      There exists for every sheaf~$\Gs$ and every homomorphism of presheaves~$f \colon \Fs \to I(\Gs)$ a unique homomorphism of sheaves~$\lambda \colon S(\Fs) \to \Gs$ that makes the following triangle commute:
      \[
        \begin{tikzcd}[sep = large]
            \Fs
            \arrow{r}[above]{\eta_{I(\Fs)}}
            \arrow{dr}[below left]{f}
          & IS(\Fs)
            \arrow[dashed]{d}[right]{I(\lambda)}
          \\
            {}
          & I(\Gs)
        \end{tikzcd}
      \]
      
      If a presheaf~$\Fs$ is already a sheaf, then it follows from the full faithfulness of the inclusion functor~$I$ that the sheafification~$SI(\Fs)$ of~$\Fs$ is just~$\Fs$ itself.
      
      To be more precise, the sheaf~$\Fs$ is also a sheafification of the presheaf~$I(\Fs)$, in the sense that the identity homomorphism~$\id_{I(\Fs)} \colon I(\Fs) \to I(\Fs)$ fulfils the same universal property as the counit~$\eta_{I(\Fs)} \colon I(\Fs) \to ISI(\Fs)$:
      Let~$\Gs$ be another sheaf and let~$f \colon I(\Fs) \to I(\Gs)$ be a homomorphism of presheaves.
      Then, as~$I$ is fully faithful, there exist a unique homomorphism of sheaves~$\lambda \colon \Fs \to \Gs$ that makes the desired triangle
      \[
        \begin{tikzcd}[sep = large]
            I(\Fs)
            \arrow{r}[above]{\id_{I(\Fs)}}
            \arrow{dr}[below left]{f}
          & I(\Fs)
            \arrow{d}[right]{I(\lambda)}
          \\
            {}
          & I(\Gs)
        \end{tikzcd}
      \]
      commute.
      
      As both~$\eta \colon I(\Fs) \to ISI(\Fs)$ and~$\id_{I(\Fs)} \colon I(\Fs) \to I(\Fs)$ have the same universal property, we can conclude that there exist a unique homomorphism of presheaves~$ISI(\Fs) \to I(\Fs)$ that makes the triangle
      \[
        \begin{tikzcd}[column sep = small]
            {}
          & I(\Fs)
            \arrow{dl}[above left]{\eta_{I(\Fs)}}
            \arrow{dr}[above right]{\id_{I(\Fs)}}
          & {}
          \\
            ISI(\Fs)
            \arrow[dashed]{rr}
          & {}
          & I(\Fs)
        \end{tikzcd}
      \]
      commute, and that this homomorphism is already an isomorphism.
      This homomorphism is just~$\eta_{I(\Fs)}$ itself (as~$\eta_{I(\Fs)}$ makes the above triangle commute) and so~$\eta_{I(\Fs)}$ is an isomorphism (of presheaves, and hence also of sheaves).
      \begin{remark*}
        \leavevmode
        \begin{enumerate}
          \item
            One can also express the above argumentation in the language of representable functors:
            It holds that by the naturality of~$\varphi$ and the full faithfulness of~$I$ that
            \[
                    \Scat(S(I(\Fs)), -)
              \cong \Pcat(I(\Fs), I(-))
              \cong \Scat(\Fs, -) \,,
            \]
            and hence~$SI(\Fs) \cong \Fs$ (because representing objects are unique up to isomorphism).
%           TODO: How these isomorphisms look like explicitely, i.e. that eta is an iso.
          \item
            The constructed isomorphism~$SI(\Fs) \cong \Fs$ is furthermore natural (in~$\Fs$), and hence gives a natural isomorphism~$S \circ I \cong \Id_{\Scat}$.
          \item
            Let more generally~$(F,G,\varphi)$ be an adjunction from a category~$\Ccat$ to a category~$\Dcat$, with unit~$\eta \colon \Id_\Ccat \to G \circ F$ and counit~$\varepsilon \colon F \circ G \to \Id_\Dcat$.
            Then
            \begin{itemize}
              \item
                $F$ is fully faithful if and only if the unit~$\eta$ is an isomorphism, and dually
              \item
                $G$ is fully faithful if and only if the counit~$\varepsilon$ is an isomorphism.
            \end{itemize}
            Proofs of this can be found in~\cite{stackfullyfaithful}, \cite[Lemma 7.6.6]{Brandenburg} and \cite[IV,~3,~Theorem~1]{Working} (where it more generally explained under what conditions~$F$ and~$G$ are faithful, and under what conditions they are full).
        \end{enumerate}
      \end{remark*}
      
      \begin{examplenonum}[Sheafificaton]
        \leavevmode
        \begin{enumerate}
          \item
            Let~$A$ be an abelian group.
            The \emph{constant sheaf}~$\Cs_{X,A}$\index{constant!sheaf}\index{sheaf!constant} is defined to be the sheafification of the constant presheaf~$\widetilde{\Cs}_{X,A}$.
            It is given by
            \[
                \Cs_{X,A}(U)
              = \{
                  f \colon U \to A
                \suchthat
                  \text{$f$ is locally constant}
                \}
            \]
            for every open subset~$U \subseteq X$, and for all open subsets~$U \subseteq V \subseteq X$ the restriction homomorphism
            \[
                      \rho_{V,U}
              \colon  \Cs_{X,A}(V)
              \to     \Cs_{X,A}(U) \,,
              \quad   f
              \mapsto \restrict{f}{U}
            \]
            is the (literal) restriction map.
          \item
            Let~$\Fs$ be a sheaf and let~$\Fs' \subseteq \Fs$ be a subpresheaf, i.e.,~$\Fs$ is a presheaf such that $\Fs'(U) \subseteq \Fs(U)$ is a subgroup for every open subset~$U \subseteq X$, and such that the square
            \[
              \begin{tikzcd}[sep = large]
                  \Fs'(V)
                  \arrow[hook]{r}
                  \arrow{d}[left]{\rho^{\Fs'}_{V,U}}
                & \Fs(V)
                  \arrow{d}[right]{\rho^\Fs_{V,U}}
                \\
                  \Fs'(U)
                  \arrow[hook]{r}
                & \Fs(U)
              \end{tikzcd}
            \]
            commutes for all open subsets~$U \subseteq V \subseteq X$.
            Then the sheafification~$S(\Fs')$ is given by
            \[
                S(\Fs')(U)
              = \left\{
                  s \in \Fs(U)
                \suchthat*
                  \begin{tabular}{@{}c@{}}
                    there exists an open cover~$\{U_i\}_{i \in I}$ of~$U$ \\
                    with~$\restrict{s}{U_i} \in \Fs'(U_i)$ for every~$i\in I$
                  \end{tabular}
                \right\} \,,
            \]
            and the restriction homomorphism
            \[
                      \rho_{V,U}^{S(\Fs')}
              \colon  S(\Fs')(V)
              \to     S(\Fs')(U)
            \]
            is for all open subsets~$U \subseteq V \subseteq X$ the restriction of the restriction homomorphism~$\rho_{V,U}^{\Fs} \colon \Fs(V) \to \Fs(U)$.
            
            (This is Exercise~1 of Exercise~sheet~7.)
        \end{enumerate}
      \end{examplenonum}
      
      For the general construction of the sheafification functor one uses stalks.
      We will not do this here.
      
    \item
      Let~$f \colon \Fs \to \Gs$ be a homomorphism of sheaves.
      That the cokernel~$\coker_{\Pcat}(I(f))$ is in general not a sheaf can be fixed by applying the sheafification functor~$S$:
      
      \begin{claimnonum}
        The sheafification~$S(\coker_{\Pcat}(I(f)))$ is a cokernel of~$f$ in~$\Scat$.
      \end{claimnonum}
      
      \begin{proof}
        Let~$\eta \colon \coker_{\Pcat}(I(f)) \to IS( \coker_{\Pcat}(I(f)) )$ be the canonical homomorphism, and let~$c' \colon I(\Gs) \to \coker(I(f))$ be the homomorphism belonging to the cokernel~$\coker(I(f))$.
        The functor~$I$ is fully faithful, and so there exists for the composition
        \[
                          I(\Gs)
          \xlongto{c'}    \coker_{\Pcat}(I(f))
          \xlongto{\eta}  IS(\coker_{\Pcat}(I(f)))
        \]
        a unique homomorphism of sheaves~$c \colon \Gs \to S(\coker_{\Pcat}(I(f)))$ such that the homomorphism~$I(c)$ is the above composition.
        Then~$c$ is a cokernel of~$f$:
        
        It holds that
        \[
            I(c \circ f)
          = I(c) \circ I(f)
          = c' \circ I(f)
          = 0
        \]
        because~$c'$ is a cokernel of~$I(f)$ and~$I$ is additive.
        Suppose that~$h \colon \Gs \to \Hs$ is a homomorphism of sheaves with~$h \circ f = 0$.
        Then
        \[
          I(h) \circ I(f) = I(h \circ f) = I(0) = 0
        \]
        and it follows from the universal property of the cokernel~$c'$ that there exists a unique homomorphism of presheaves~$\lambda' \colon I(\Hs) \to \coker_{\Pcat}(I(f))$ that makes the triangle
        \[
          \begin{tikzcd}[row sep = large]
              {}
            & I(\Hs)
            \\
              I(\Gs)
              \arrow{ur}[above left]{I(h)}
              \arrow{r}[below]{c'}
            & \coker_{\Pcat}(I(f))
              \arrow[dashed]{u}[right]{\lambda'}
          \end{tikzcd}
        \]
        commute. 
        It follows from the universal property of the sheafification that there exists a unique homomorphism of sheaves~$\lambda' \colon \Hs \to S(\coker_\Pcat(I(f)))$ that makes the triangle
        \[
          \begin{tikzcd}[row sep = large]
              \coker_\Pcat(I(f))
              \arrow{r}[above]{\eta}
              \arrow{dr}[below left]{\lambda'}
            & IS(\coker_\Pcat(I(f)))
              \arrow{d}[right]{I(\lambda)}
            \\
              {}
            & I(\Hs)
          \end{tikzcd}
        \]
        commute.
        It holds that
        \[
            I(h)
          = \lambda' \circ c'
          = I(\lambda) \circ \eta \circ c'
          = I(\lambda) \circ I(c)
          = I(\lambda \circ c)
        \]
        and hence~$h = \lambda \circ c$ because~$f$ is fully faithful.
        
        The uniqueness of~$\lambda$ can be shown similarly.
%       TODO: Do this.
      \end{proof}
      
      \begin{remark*}
        One can express the above proof in the language of representable functors:
        It follows from the naturality of the adjunction~$\varphi$, the universal property of the cokernel~$\coker_{\Pcat}(f)$ and the full faithfulness of the inclusion functor~$I$ that
        \begin{align*}
               {}&  \Scat(S(\coker_{\Pcat}(I(f))), -) \\
          \cong{}&  \Pcat(\coker_{\Pcat}(I(f)), I(-)) \\
          \cong{}&  \{
                      g \in \Pcat(I(\Gs), I(-))
                    \suchthat
                      g \circ I(f) = 0
                    \}  \\
          \cong{}&  \{
                      h \in \Scat(\Gs,-)
                    \suchthat
                      I(h) \circ I(f) = 0
                    \}  \\
          \cong{}&  \{
                      h \in \Scat(\Gs,-)
                    \suchthat
                      I(h \circ f) = 0
                    \}  \\
          \cong{}&  \{
                      h \in \Scat(\Gs,-)
                    \suchthat
                      h \circ f = 0
                    \} \,.
        \end{align*}
        This shows that~$S(\coker_{\Pcat}(I(f)))$ represents the right kind of functor to make it a cokernel of~$f$.
%       TODO: Explain this in more detail at a previous spot.
      \end{remark*}
  \end{enumerate}
  
  
  
  
  
  \lecturend{12}
  
  
  
  
  
  \begin{enumerate}[resume]
    \item
      Let~$f \colon \Fs \to \Gs$ be a homomorphism of presheaves.
      Then there exists a unique homomorphism of sheaves~$\lambda \colon S( \ker_\Pcat(f) ) \to \ker_{\Scat}(S(f))$ that makes the triangle
      \[
        \begin{tikzcd}[sep = large]
            S( \ker_\Pcat(f) )
            \arrow[dashed]{d}[left]{\lambda}
            \arrow{dr}
          & {}
          \\
            \ker_\Scat(S(f))
            \arrow{r}
          & S(\Fs)
        \end{tikzcd}
      \]
      commute;
      here~$\ker_\Scat(S(f)) \to S(\Fs)$ denotes the canonical homomorphism of the kernel, and~$S(\ker_\Pcat(f)) \to S(\Fs)$ denotes the homomorphism induced by the canonical homomorphism~$\ker_\Pcat(f) \to \Fs$.
      Indeed, the composition
      \[
          \ker_\Pcat(f)
        \to
          \Fs
        \xlongto{f}
          \Gs
      \]
      is the zero homomorphism.
      It follows that the composition
      \[
          \ker_\Pcat(f)
        \to
          S(\Fs)
        \xlongto{S(f)}
          S(\Gs)
      \]
      is again the zero homomorphism because the sheafification functor~$S$ is additive.
      The existence and uniqueness of the homomorphism~$\lambda$ thus follows from the universal property of the kernel~$\ker_\Scat(S(f)) \to S(\Fs)$.
      
      \begin{fact}
        The homomorphism~$\lambda \colon S( \ker_\Pcat(f) ) \to \ker_{\Scat}(S(f))$ is an isomorphism.
      \end{fact}
      
    \item
      If~$f \colon \Fs \to \Gs$ is a homomorphism of sheaves then the canonical homomorphism~$\tilde{f} \colon \coim(f) \to \im(f)$ is an isomorphism:
      
      The resulting homomorphism of presheaves~$I(f) \colon I(\Fs) \to I(\Gs)$ has the following canonical factorization:
      \[
        \begin{tikzcd}[sep = large]
            I(\Fs)
            \arrow{r}[above]{I(f)}
            \arrow{d}
          & I(\Gs)
          \\
            \coim(I(f))
            \arrow{r}[above]{\widetilde{I(f)}}
          & \im(I(f))
            \arrow{u}
        \end{tikzcd}
      \]
      We note that the homomorphism~$\widetilde{I(f)} \colon \coim(I(f)) \to \im(I(f))$ is an isomorphism because the presheaf category~$\Pcat$ is abelian.
      By applying the sheafification functor~$S$ to this square diagram we get the following commutative square:
      \[
        \begin{tikzcd}[sep = large]
            SI(\Fs)
            \arrow{r}[above]{SI(f)}
            \arrow{d}
          & SI(\Gs)
          \\
            S(\coim(I(f)))
            \arrow{r}[above]{S(\widetilde{I(f)})}
          & S(\im(I(f)))
            \arrow{u}
        \end{tikzcd}
      \]
      The homomorphisms of sheaves~$S(\widetilde{I(f)})$ is again an isomorphism.      
      We now get the following diagram:
      \[
        \begin{tikzcd}[sep = large]
            \Fs
            \arrow{rrr}[above]{f}
            \arrow{dr}[below left]{\cong}
            \arrow{ddd}
          & {}
          & {}
          & \Gs
            \arrow{dl}[below right]{\cong}
          \\
            {}
          & SI(\Fs)
            \arrow{r}[above]{SI(f)}
            \arrow{d}
          & SI(\Gs)
          & {}
          \\
            {}
          & S( \coim_\Pcat(I(f)) )
            \arrow{r}[above]{S(\widetilde{I(f)})}
          & S( \im_\Pcat(I(f)) )
            \arrow{u}
          & {}
          \\
            \coim_\Scat(f)
            \arrow{ur}[above left]{\cong}
            \arrow{rrr}[above]{\tilde{f}}
          & {}
          & {}
          & \im_\Scat(f)
            \arrow{ul}[above right]{\cong}
            \arrow{uuu}
        \end{tikzcd}
      \]
      This diagram commutes:
      \begin{itemize}
        \item
          We have seen above that the inner square commutes.
        \item
          The outer square commutes by definition of~$\tilde{f}$.
        \item
          The upper trapezoid commutes by the naturality of~$\Id_\Scat \cong S \circ I$.
        \item
          The author finds the argument that was given in the lecture for the commutativity of the left trapezoid not sufficient.
          This argument is therefore currently missing from these notes.
%           The left trapezoid commutes because
%           \begin{align*}
%             {}&  S( I(\Fs) \to \coim_\Pcat(I(f)) ) \\
%             ={}&  S( \coker_\Pcat( \ker_\Pcat(I(f)) \to I(\Fs) ) )  \\
%             ={}&  S( \coker_\Pcat( I(\ker_\Scat(f)) \to I(\Fs) ) )  \\
%             ={}&  S( \coker_\Pcat(I( \ker_\Scat(f) \to \Fs )) ) \\
%             ={}&  \coker_\Scat( \ker_\Scat(f) \to \Fs ) \\
%             ={}&  ( \Fs \to \coim_\Scat(f) ) \,.
%           \end{align*}
        \item
          The commutativity of the right trapezoid was not explained in the lecture.
        \item
          The commutativity of the lower trapezoid follows from the commutativity of the rest of the diagram:
          It holds that
          \begin{align*}
               {}&  (
                          \Fs
                      \to \coim_\Scat(f)
                      \to S(\coim_\Pcat(I(f)))
                      \to S(\im_\Pcat(I(f)))
                      \to \im_\Scat(f)
                      \to \Gs
                    ) \\
              ={}&  (
                          \Fs
                      \to SI(\Fs)
                      \to S(\coim_\Pcat(I(f)))
                      \to S(\im_\Pcat(I(f)))
                      \to SI(\Gs)
                      \to \Gs
                    ) \\
              ={}&  (
                          \Fs
                      \to SI(\Fs)
                      \to SI(\Gs)
                      \to \Gs
                    ) \\
              ={}&  (
                          \Fs
                      \to \Gs
                    )  \\
              ={}&  (
                          \Fs
                      \to \coim_\Scat(f)
                      \to \im_\Scat(f)
                      \to \Gs
                    ) \,.
          \end{align*}
          The homomorphism~$\Fs \to \coim_\Scat(f)$ is an epimorphism and the homomorphism~$\im_\Scat(f) \to \Gs$ is a monomorphism.
          We hence find that already
          \begin{align*}
            {}&
              (
                    \coim_\Scat(f)
                \to S(\coim_\Pcat(I(f)))
                \to S(\im_\Pcat(I(f)))
                \to \im_\Scat(f)
              )
            \\
            ={}&
              (
                    \coim_\Scat(f)
                \to \im_\Scat(f)
              ) \,.
          \end{align*}
      \end{itemize}
      The commutativity of the lower trapezoid shows that the canonical homomorphism~$\tilde{f}$ is a composition of three isomorphisms, and therefore an isomorphism itself.
  \end{enumerate}
  
  This altogether shows that the sheaf category~$\Scat = \Sheaf_X(\Ab)$ is abelian.
\end{example}


\begin{lemma}
  Let~$\Acat$ be an abelian category.
  \begin{enumerate}
    \item
      Every monomorphism in~$\Acat$ is the kernel of its cokernel.
      It is in particular a kernel.
    \item
      Every epimorphism in~$\Acat$ is the cokernel of its kernel.
      It is in particular a cokernel.
  \end{enumerate}
\end{lemma}


\begin{proof}
  \leavevmode
  \begin{enumerate}
    \item
      Let~$f \colon X \to Y$ be a monomorphism in~$\Acat$.
      Then~$\ker(f) = 0$ and hence the identity~$\id_Y \colon X \to X$ is a cokernel of~$\ker(f) \to X$.
      The canonical factorization of~$f$ is therefore given as follows:
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow[equal]{d}
          & Y
          \\
            \coim(f)
            \arrow{r}[above]{\cong}[below]{\tilde{f}}
          & \im(f)
            \arrow{u}
        \end{tikzcd}
      \]
      This commutative square can also be compressed into the following commutative triangle:
      \[
        \begin{tikzcd}
            X
            \arrow{rr}[above]{\cong}[below]{\tilde{f}}
            \arrow{dr}[below left]{f}
          & {}
          & \im(f)
            \arrow{dl}
          \\
            {}
          & Y
          & {}
        \end{tikzcd}
      \]
      The canonical morphism~$\im(f) \to Y$ is a kernel of the cokernel~$Y \to \coker(f)$.
      It follows from the above triangle that~$f \colon X \to Y$ is also a kernel of~$Y \to \coker(f)$.
    \item
      This can be shown dually.
    \qedhere
  \end{enumerate}
\end{proof}


\begin{remark}
  Let~$f \colon X \to Y$ be a morphism in an abelian category~$\Acat$.
  Then the canonical morphism~$f' \colon X \to \im(f)$ is an epimorphism and the canonical morphism~$\bar{f} \colon \coim(f) \to Y$ is a monomorphism.
  Indeed, the morphism~$f'$ is given by the composition of epimorphisms
  \[
    X
    \to
    \coim(f)
    \xlongto{\tilde{f}}
    \im(f) \,,
  \]
  while~$\bar{f}$ is given by the composition of monomorphisms
  \[
    \coim(f)
    \xlongto{\tilde{f}}
    \im(f)
    \to
    Y \,.
  \]
\end{remark}


\begin{proposition}
  \label{iso iff epi and mono}
  A morphism~$f$ in an abelian category~$\Acat$ is an isomorphism if and only if it is both an epimorphism and a monomorphism.
\end{proposition}


\begin{proof}
  If~$f$ is an isomorphism then it is both an epimorphism and a monomorphism, as this holds in every category.
  
  Suppose on the other hand that~$f$ is both an epimorphism and a monomorphism.
  Then the zero morphism~$0 \to X$ is a kernel of~$f$ and the zero morphism~$Y \to 0$ is a cokernel of~$f$.
  The identity~$\id_X \colon X \to X$ is therefore a coimage of~$f$, while the identity~$\id_Y \colon Y \to Y$ is an image of~$f$.
  The canonical factorization of~$f$ is therefore given as follows:
  \[
    \begin{tikzcd}
        X
        \arrow{r}[above]{f}
        \arrow[equal]{d}
      & Y
        \arrow[equal]{d}
      \\
        \coim(f)
        \arrow{r}[above]{\tilde{f}}
      & \im(f)
    \end{tikzcd}
  \]
  The isomorphism~$\tilde{f}$ is therefore just~$f$ itself.
\end{proof}




