\section{Injective and Projective Resolutions}


\begin{definition}
  \label{definition of projective and injective}
  Let~$\Ccat$ be a category.
  \begin{enumerate}
    \item
      An object~$P \in \Ob(\Ccat)$ is \emph{projective}\index{projective!object}\index{object!projective} if for every epimorphism~$f \colon X \to Y$ in~$\Ccat$ and every morphism~$g \colon P \to Y$ in~$\Ccat$ there exists a lift of~$g$ along~$f$, i.e., a morphism~$g' \colon P \to X$ that makes the following diagram commute:
      \[
        \begin{tikzcd}
            {}
          & P
            \arrow{d}[right]{g}
            \arrow[dashed]{dl}[above left]{g'}
          \\
            X
            \arrow{r}[below]{f}
          & Y
        \end{tikzcd}
      \]
    \item
      An object~$I \in \Ob(\Ccat)$ is \emph{injective}\index{injective!object}\index{object!injective} if for every monomorphism~$f \colon X \to Y$ and every morphism~$g \colon X \to I$ there exist a morphism~$g' \colon Y \to I$ that makes the following diagram commute:
      \[
        \begin{tikzcd}
            X
            \arrow{r}[above]{f}
            \arrow{d}[left]{g}
          & Y
            \arrow[dashed]{dl}[below right]{g'}
          \\
            I
          & {}
        \end{tikzcd}
      \]
  \end{enumerate}
\end{definition}


\begin{remark}
  Let~$\Ccat$ be a category.
  \begin{enumerate}
    \item
      An object~$X \in \Ob(\Ccat)$ is projective in~$\Ccat$ if and only if it is injective in~$\Ccat^\op$.
    \item
      The induced morphisms~$g'$ in \cref{definition of projective and injective} are in general not unique.
  \end{enumerate}
\end{remark}


\begin{lemma}
  \leavevmode
  \begin{enumerate}
    \item
      \label{characterization of projectives}
      For an object~$P \in \Ob(\Acat)$ the following conditions are equivalent:
      \begin{enumerate}
        \item
          \label{is projective}
          The object~$P$ is projective.
        \item
          \label{is exact}
          The functor~$\Hom_{\Acat}(P,-) \colon \Acat \to \Ab$ is exact.
        \item
          \label{sends epis to epis}
          The functor~$\Hom_{\Acat}(P,-) \colon \Acat \to \Ab$ maps epimorphisms to epimorphisms.
      \end{enumerate}
    \item
      For an object~$I \in \Ob(\Acat)$ the following conditions are equivalent:
      \begin{enumerate}
        \label{characterization of injectives}
        \item
          The object~$I$ is injective.
        \item
          The functor~$\Hom_\Acat(-,I) \colon \Acat^\op \to \Ab$ is exact.
        \item
          The functor~$\Hom_\Acat(-,I) \colon \Acat^\op \to \Ab$ maps epimorphisms to epimorphisms.%
          \footnote{If one thinks about~$\Hom_\Acat(-,I)$ not as a covariant functor~$\Acat^\op \to \Ab$ but instead as a contravariant functor~$\Acat \to \Ab$, then this means that~$\Hom_{\Acat}(-,I)$ maps monomorphisms (in~$\Acat$) to epimorphisms.}
      \end{enumerate}
  \end{enumerate}
\end{lemma}


\begin{proof}
  It suffices to show part~\ref*{characterization of projectives} because part~\ref*{characterization of injectives} then follows by duality.
  
  \begin{description}
    \item[\ref*{is projective}~$\iff$~\ref*{sends epis to epis}]
      That the functor~$\Hom_{\Acat}(P,-)$ maps epimorphisms to surjections is just a reformulation of the definition of a projective object.
    \item[\ref*{sends epis to epis}~$\implies$~\ref*{is exact}]
      This holds because the functor~$\Hom_\Acat(P,-)$ is already left exact.
    \item[\ref*{is exact}~$\implies$~\ref*{sends epis to epis}]
      Every epimorphism~$f \colon X \to Y$ can be extended to a short exact sequence
      \[
        0
        \to
        \ker(f)
        \to
        X
        \to
        Y
        \to
        0
      \]
      in~$\Acat$, and the exactness of the induced sequence
      \[
        0
        \to
        \Hom_\Acat(P,\ker(f))
        \to
        \Hom_\Acat(P,X)
        \to
        \Hom_\Acat(P,Y)
        \to
        0
      \]
      entails that the group homomorphism~$\Hom_\Acat(P,X) \to \Hom_\Acat(P,Y)$ is surjective.
    \qedhere
  \end{description}
\end{proof}


% TODO: Projective modules.
% TODO: Remarks about injective modules.


\begin{definition*}
  Let~$\Ccat$ be a category and let~$s \colon X \to Y$ and~$r \colon Y \to X$ be two morphisms in~$\Ccat$ with~$rs = \id_X$.
  Then the morphism~$s$ is a \emph{section \textup(for~$r$\textup)}\index{section} and the morphism~$r$ is a \emph{retraction \textup(for~$s$\textup)}\index{retraction}.
  (This definition is given in Exercise~2 of Exercise~Sheet~9.)
\end{definition*}


\begin{remark*}
  Let~$\Ccat$ and~$\Dcat$ be categories.
  \begin{enumerate}
    \item
      Sections are also called \emph{split monomorphisms}\index{split!monomorphism}\index{monomorphism!split}, and retractions are also called \emph{split epimorphisms}\index{split!epimorphism}\index{epimorphism!split}.
  
      Split monomorphisms are monomorphisms, and split epimorphisms are epimorphisms (as the names indicate).
      (This observation is also made in Exercise~2 of Exercise~Sheet~9.)
      Indeed, if~$s \colon X \to Y$ and~$r \colon Y \to X$ are morphisms in~$\Ccat$ with~$rs = \id_X$ then it follows for all morphisms~$t, t' \colon W \to X$ that
      \[
        st = st'
        \implies
        rst = rst
        \implies
        t = t' \,,
      \]
      and similarly for all morphisms~$u, u' \colon Y \to Z$ that
      \[
        ur = u'r
        \implies
        urs = u'rs
        \implies
        u = u'  \,.
      \]
      
      A monomorphism is said to be \emph{split} if it is a split monomorphism.
      Similarly, an epimorphism is said to be \emph{split} if it is a split epimorphism.
    \item
      A morphism~$f$ in~$\Ccat$ is a section in~$\Ccat$ if and only if it is a retraction in~$\Ccat^\op$.
    \item
      A morphism~$f$ in~$\Ccat$ is both a section and a retract if and only it is an isomorphism.
    \item
      Functors respect sections and retractions:
      Let~$F \colon \Ccat \to \Dcat$ be a functor, let~$s$ is a section and~$\Ccat$ and~$r$ is a retraction in~$\Ccat$.
      Then~$F(s)$ is a section in~$\Dcat$ and~$F(r)$ is a retraction in~$\Dcat$.
  \end{enumerate}
\end{remark*}


\begin{lemma*}
  \label{characterizations of split ses}
  For a short exact sequence
  \[
    0
    \to
    X'
    \xto{f}
    X
    \xto{g}
    X''
    \to
    0
  \]
  in~$\Acat$, the following conditions are equivalent:
  \begin{enumerate}
    \item
      \label{is left split}
      The morphism~$f$ is a section.
    \item
      \label{is right split}
      The morphism~$g$ is a retraction.
    \item
      \label{is total split}
      There exists an isomorphism~$\alpha \colon X \to X' \oplus X''$ that makes the diagram
      \[
        \begin{tikzcd}
            0
            \arrow{r}
          & X'
            \arrow{r}[above]{f}
            \arrow[equal]{d}
          & X
            \arrow{r}[above]{g}
            \arrow[dashed]{d}[right]{\alpha}
          & X''
            \arrow{r}
            \arrow[equal]{d}
          & 0
          \\
            0
            \arrow{r}
          & X'
            \arrow{r}
          & X' \oplus X''
            \arrow{r}
          & X''
            \arrow{r}
          & 0
        \end{tikzcd}
      \]
      commute, where~$X' \to X' \oplus X''$ and~$X' \oplus X'' \to X''$ are the canonical morphisms that are part of the biproduct structure of~$X' \oplus X''$.
    \item
      \label{is biproduct}
      There exists morphisms~$r \colon X \to X'$ and~$s \colon X'' \to X$ such that~$(X, (f,s), (r,g))$ is a biproduct of~$X'$ and~$X''$.
  \end{enumerate}
\end{lemma*}


\begin{proof*}
  The equivalence of the parts~\ref*{is left split},~\ref*{is right split} and~\ref*{is biproduct} is Exercise~2 of Exercise~sheet~9.
  
  The implication \ref*{is total split}~$\implies$~\ref*{is biproduct} can be seen by pulling back the~$X'$\nobreakdash-$X''$\nobreakdash-biproduct structure of~$X' \oplus X''$ along~$\alpha$ to a~$X'$\nobreakdash-$X''$\nobreakdash-biproduct structure on~$X$.
  It then follows from the commutativity of the given diagram that the canonical morphism~$X' \to X' \oplus X''$ corresponds to the morphism~$f \colon X' \to X$, and that the canonical morphism~$X' \oplus X'' \to X''$ corresponds to the morphism~$g \colon X \to X''$.
  
  For the implications \ref*{is left split}~$\implies$~\ref*{is total split} one chooses a retraction~$r \colon X \to X'$ of~$f$.
  Then the morphism
  \[
    \alpha
    \defined
    \begin{bmatrix}
      r \\
      g
    \end{bmatrix}
    \colon
    X
    \to
    X' \oplus X''
  \]
  makes the given diagram commute, and it follows from the \hyperref[5 lemma]{\dash{$5$}{lemma}} that~$\alpha$ is an isomorphism.
\end{proof*}


% TODO: Make this a proper proof.


\begin{definition*}
  A short exact sequence in~$\Acat$ is \emph{split}\index{split!short exact sequence}\index{short exact sequence!split} if it satisfies the equivalent conditions from~\cref{characterizations of split ses}.
\end{definition*}


\begin{warning*}
  While it still makes sense to talk about short exact sequences in the category~$\Group$ of groups, it is for such a short exact sequence of groups
  \[
    1
    \to
    K
    \xlongto{f}
    G
    \xlongto{g}
    H
    \to
    1
  \]
  not equivalent that~$f$ is a section and that~$g$ is a retraction.
  Indeed, that~$f$ is a section is---roughly speaking---equivalent to~$G$ being a direct product of the groups~$K$ and~$H$;
  whereas~$g$ being a retract is equivalent to~$G$ being a semidirect product of the groups~$K$ and~$H$.
\end{warning*}


\begin{remark*}[Split chain complexes]
  \leavevmode
  \begin{enumerate}
    \item
      If more generally~$\Ccc$ is a chain complex in~$\Acat$, then~$\Ccc$ \emph{splits}\index{split!chain complex}\index{chain complex!split} if there exists a family~$s = (s_n)_{n \in \Integer}$ of morphisms~$s_n \colon C_n \to C_{n+1}$ with~$dsd = d$, i.e.\ such that~$d_n s_n d_n = d_n$ for every~$n \in \Integer$.
      Such a family~$s$ is a \emph{split} for~$\Ccc$, and may be visualized as follows:
      \[
        \begin{tikzcd}[column sep = large]
            \dotsb
            \arrow{r}
          & C_{n+1}
            \arrow[dashed, bend right=55]{l}
            \arrow{r}[above]{d_{n+1}}
          & C_n
            \arrow[dashed, bend right=55]{l}[above]{s_n}
            \arrow{r}[above]{d_n}
          & C_{n-1}
            \arrow[dashed, bend right=55]{l}[above]{s_{n-1}}
            \arrow{r}
          & \dotsb
            \arrow[dashed, bend right=55]{l}
        \end{tikzcd}
      \]
    \item
      A more intuitive but equivalent definition of~$\Ccc$ being split is the following:
      There exist families~$(B_n)_{n \in \Integer}$ and~$(H_n)_{n \in \Integer}$ of objects~$B_n, H_n \in \Ob(\Acat)$, and isomorphisms
      \[
        \alpha_n
        \colon
        C_n
        \to
        B_n \oplus H_n \oplus B_{n-1}
      \]
      that make the following diagram commute for every~$n \in \Integer$:
      \[
        \begin{tikzcd}[ampersand replacement = \&, column sep = 4em]
              \dotsb
              \arrow{r}
          \&  C_n
              \arrow{r}[above]{d_n}
              \arrow{d}[right]{\alpha_n}
          \&  C_{n-1}
              \arrow{r}
              \arrow{d}[right]{\alpha_{n-1}}
          \&  \dotsb
          \\
              \dotsb
              \arrow{r}
          \&  B_n \oplus H_n \oplus B_{n-1}
              \arrow{r}[below]{\begin{bsmallmatrix} 0 & 0 & 1 \\ 0 & 0 & 0 \\ 0 & 0 & 0 \end{bsmallmatrix}}
          \&  B_{n-1} \oplus H_{n-1} \oplus B_{n-2}
              \arrow{r}
          \&  \dotsb
        \end{tikzcd}
      \]
      (This characterization of split chain complexes should be compared with the characterization~\ref*{is total split} of a split short exact sequence from \cref{characterizations of split ses}.)
      The split morphisms~$s_n \colon C_n \to C_{n+1}$ correspond to the morphisms
      \[
        \begin{bmatrix}
          0 & 0 & 0 \\
          0 & 0 & 0 \\
          1 & 0 & 0
        \end{bmatrix}
        \colon
        B_n \oplus H_n \oplus B_{n-1}
        \to
        B_{n+1} \oplus H_{n+1} \oplus B_n \,.
      \]
      We furthermore have that~$\Bl_n(\Ccc) \cong B_n$,~$\Zl_n(\Ccc) \cong B_n \oplus H_n$ and~$\Hl_n(\Ccc) \cong H_n$ for every~$n \in \Integer$.
      Moverover, under these identifications the canonical (mono)mor\-phism~$\Bl_n(\Ccc) \to \Zl_n(\Ccc)$ corresponds to the canonical morphism~$B_n \to B_n \oplus H_n$, and the canonical (epi)morphism~$\Zl_n(\Ccc) \to \Hl_n(\Ccc)$ corresponds to the canonical morphism~$B_n \oplus H_n \to H_n$.
    \item
      A short exact sequence
      \[
        0
        \to
        X'
        \xlongto{f}
        X
        \xlongto{g}
        X''
        \to
        0
      \]
      in~$\Acat$ can be regarded as a chain complex
      \[
        \dotsb
        \to
        0
        \to
        0
        \to
        X'
        \xlongto{f}
        X
        \xlongto{g}
        X''
        \to
        0
        \to
        0
        \to
        \dotsb
      \]
      in~$\Acat$.
      Then both notions of \enquote{being split} coincide:
      
      The chain complex is split (according to the above definition) if and only if there exists morphisms~$r \colon X \to X'$ and~$s \colon X'' \to X$ such that~$frf = f$ and~$gsg = g$.
      \[
        \begin{tikzcd}[column sep = 3.2em]
            \dotsb
            \arrow{r}
          & 0
            \arrow{r}
          & X'
            \arrow{r}[above]{f}
          & X
            \arrow[dashed, bend right=55]{l}[above]{r}
            \arrow{r}[above]{g}
          & X''
            \arrow[dashed, bend right=55]{l}[above]{s}
            \arrow{r}
          & 0
            \arrow{r}
          & \dotsb
        \end{tikzcd}
      \]
      That~$frf = f$ is equivalent to~$rf = \id_{X'}$ because~$f$ is a monomorphism, and that~$gsg = g$ is equivalent to~$gs = \id_{X''}$ because~$g$ is an epimorphism.
  \end{enumerate}
\end{remark*}


\begin{remark*}
  \label{split preserved under additive}
  \leavevmode
  \begin{enumerate}
    \item
      Additive functors respect split short exact sequences:
      Suppose that~$F \colon \Acat \to \Bcat$ is an an additive functor and let
      \[
        0
        \to
        X'
        \to
        X
        \to
        X''
        \to
        0
      \]
      be a split short exact sequence in~$\Acat$.
      Then the resulting sequence
      \[
        0
        \to
        F(X')
        \to
        F(X)
        \to
        F(X'')
        \to
        0
      \]
      in~$\Bcat$ is again split short exact.
      Indeed, there exists in~$\Acat$ an isomorphism
      \[
        \alpha
        \colon
        X
        \to
        X' \oplus X''
      \]
      that makes the following diagram commute:
      \[
        \begin{tikzcd}[ampersand replacement = \&, column sep = large]
              0
              \arrow{r}
          \&  X'
              \arrow{r}
              \arrow[equal]{d}
          \&  X
              \arrow{r}
              \arrow{d}[right]{\alpha}
          \&  X''
              \arrow{r}
              \arrow[equal]{d}
          \&  0
          \\
              0
              \arrow{r}
          \&  X'
              \arrow{r}[above]{\begin{bsmallmatrix} 1 \\ 0 \end{bsmallmatrix}}
          \&  X' \oplus X''
              \arrow{r}[above]{\begin{bsmallmatrix} 0 & 1 \end{bsmallmatrix}}
          \&  X''
              \arrow{r}
          \&  0
        \end{tikzcd}
      \]
      By applying the functor~$F$ to this diagram, and using that~$F$ is additive, we get the following commutative diagram in~$\Bcat$:
      \[
        \begin{tikzcd}[ampersand replacement = \&, column sep = large]
              0
              \arrow{r}
          \&  F(X')
              \arrow{r}
              \arrow[equal]{d}
          \&  F(X)
              \arrow{r}
              \arrow{d}[right]{F(\alpha)}
          \&  F(X'')
              \arrow{r}
              \arrow[equal]{d}
          \&  0
          \\
              0
              \arrow{r}
          \&  F(X')
              \arrow{r}[above]{\begin{bsmallmatrix} 1 \\ 0 \end{bsmallmatrix}}
          \&  F(X') \oplus F(X'')
              \arrow{r}[above]{{\begin{bsmallmatrix} 0 & 1 \end{bsmallmatrix}}}
          \&  F(X'')
              \arrow{r}
          \&  0
        \end{tikzcd}
      \]
      The lower row is again split short exact and the vertical arrow are isomorphisms, thus the upper row is split short exact.
    \item
      We find in the same way that additive functors respect split chain complexes and split acyclic chain complexes.
    \item
      That additive functors respect split chain complexes can also be seen by exhibiting a split for the resulting chain complex:
      Let~$F \colon \Acat \to \Bcat$ be an additive functor and let~$\Ccc$ be a split chain complex in~$\Acat$, and denote by~$F(\Ccc)$ the resulting chain complex in~$\Bcat$, namely
      \[
        \dotsb
        \to
        F(C_{n+1})
        \xlongto{F(d_{n+1})}
        F(C_n)
        \xlongto{F(d_n)}
        F(C_{n-1})
        \to
        \dotsb
      \]
      If~$s = (s_n)_{n \in \Integer}$ is a split for the chain complex~$\Ccc$, then the resulting family~$F(s) \defined (F(s_n))_{n \in \Integer}$ is a split for the chain complex~$F(\Ccc)$ because
      \[
        F(d) F(s) F(d)
        =
        F(dsd)
        =
        F(d) \,.
      \]
      Therefore, the chain complex~$F(\Ccc)$ again splits.
  \end{enumerate}
\end{remark*}


\begin{definition*}
  Let~$X \in \Ob(\Acat)$ be an object in~$\Acat$.
  An object~$Y \in \Ob(\Acat)$ is a \emph{direct summand}\index{direct summand} of~$X$ if there exists another object~$Y' \in \Ob(\Acat)$ with~$X \cong Y \oplus Y'$.
\end{definition*}


% Is this definition still needed?


\begin{lemma}
  \label{more on projectives and injectives}
  Let~$P, I \in \Ob(\Acat)$ be a objects in~$\Acat$.
  \begin{enumerate}
    \item
      \label{ses ending in projective}
      The object~$P$ is projective if and only if every short exact sequence of the form~$0 \to X' \to X \to P \to 0$ in~$\Acat$ splits.
    \item
      Dually, the object~$I$ is injective if and only if every short exact sequence of the form~$0 \to I \to X \to X'' \to 0$ in~$\Acat$ splits.
    \item
      \label{direct summand of projective}
      If~$P \cong P_1 \oplus P_2$ for objects~$P_1, P_2 \in \Ob(\Acat)$ then~$P$ is projective if and only if both~$P_1$ and~$P_2$ are projective.
    \item
      \label{direct summand of injective}
      If~$I \cong I_1 \oplus I_2$ for objects~$I_1, I_2 \in \Ob(\Acat)$ then~$I$ is injective if and only if both~$I_1$ and~$I_2$ are projective.
  \end{enumerate}
\end{lemma}


\begin{proof}
  \leavevmode
  \begin{enumerate}
    \item
      Suppose that~$P$ is projective and let~$0 \to X' \to X \to P \to 0$ be a short exact sequence in~$\Acat$ that ends in~$P$.
      Then there exists a lift of the identity~$\id_P \colon P \to P$ along the epimorphism~$X \to P$, that is then a section for~$X \to P$.
      Hence~$X \to P$ is a retraction, which shows that the given short exact sequence splits.
      \[
        \begin{tikzcd}
            0
            \arrow{r}
          & X'
            \arrow{r}
          & X
            \arrow{r}
          & P
            \arrow{r}
          & 0
          \\
            {}
          & {}
          & {}
          & P
            \arrow{u}[right]{\id_P}
            \arrow[dashed]{ul}
          & {}
        \end{tikzcd}
      \]
      
      Suppose now on the other hand that every short exact sequence that ends in~$P$ splits.
      Let~$f \colon X \to Y$ be an epimorphism in~$\Acat$ and let~$g \colon P \to Y$ be a morphism in~$\Acat$.
      We may extend the epimorphism~$f$ to a short exact sequence
      \[
        0
        \to
        \ker(f)
        \to
        X
        \xlongto{f}
        Y
        \to
        0
      \]
      in~$\Acat$.
      By using \cref{kernels of pullbacks} we get a commutative diagram
      \[
        \begin{tikzcd}
            0
            \arrow{r}
          & \ker(f)
            \arrow{r}
            \arrow[equal]{d}
          & X'
            \arrow{r}[above]{f'}
            \arrow{d}[right]{g'}
          & P
            \arrow{r}
            \arrow{d}[right]{g}
          & 0
          \\
            0
            \arrow{r}
          & \ker(f)
            \arrow{r}
          & X
            \arrow{r}[above]{f}
          & Y
            \arrow{r}
          & 0
        \end{tikzcd}
      \]
      with exact rows.
      The upper row splits by assumption, hence there exists a section~$s \colon P \to X'$ for~$f'$.
      For the morphism~$g'' \defined g's \colon P \to X$ we then have
      \[
          f g''
        = f g' s
        = g f' s
        = g \id_P
        = g \,.
      \]
    \item
      This is dual to part~\ref*{ses ending in projective}.
    \item
      This is Exercise~2 on Exercise sheet~10.
    \item
      This is dual to part~\ref*{direct summand of projective}.
    \qedhere
  \end{enumerate}
\end{proof}


\begin{remark*}
  Let~$\Ccat$ be a category.
  \begin{enumerate}
    \item
      If~$(P_j)_{j \in J}$ is a family of projective objects~$P_j$ in~$\Ccat$ that admit a coproduct~$\coprod_{j \in J} P_j$ then~$\coprod_{j \in J} P_j$ is again projective.
      
      If there exists in the category~$\Ccat$ for any two objects~$X, Y \in \Ob(\Ccat)$ a morphism~$X \to Y$ (e.g.\ if~$\Ccat$ is preadditive or has a zero object) then the converse also holds:
      If~$\coprod_{j \in J} P_j$ is projective then~$P_j$ is projective for every~$j \in J$.
%     TODO: Prove this.
    \item
      If~$(I_j)_{j \in J}$ is a family of injective objects~$I_j$ in~$\Ccat$ that admit a product~$\prod_{j \in J} I_j$ then~$\prod_{j \in J} I_j$ is again injective.
      
      If there exists in the category~$\Ccat$ for any two objects~$X, Y \in \Ob(\Ccat)$ a morphism~$X \to Y$ then the converse also holds:
      If~$\prod_{j \in J} I_j$ is injective then~$I_j$ is injective for every~$j \in J$.
  \end{enumerate}
\end{remark*}


\begin{definition}
  \leavevmode
  \begin{enumerate}
    \item 
      The category~$\Acat$ \emph{has enough projectives}\index{enough!projectives} if for every object~$X \in \Ob(\Acat)$ there exists an epimorphism~$P \to X$ coming from some projective object~$P \in \Ob(\Acat)$.
    \item
      The category~$\Acat$ \emph{has enough injectives}\index{enough!injectives} if for every object~$X \in \Ob(\Acat)$ there exists a monomorphism~$X \to I$ into some injective object~$I \in \Ob(\Acat)$.
  \end{enumerate}
\end{definition}


\begin{definition}
  Let~$X \in \Ob(\Acat)$ be an object in~$\Acat$.
  \begin{enumerate}
    \item
      A \emph{chain resolution}\index{chain!resolution}\index{resolution!chain} of~$X$ is a pair~$(\Ccc, p_0)$ consisting of
      \begin{itemize}
        \item
          a chain complex~$\Ccc \in \Chh_{\geq 0}(\Acat)$ bounded below by degree~$0$, together with
        \item
          a morphism~$p_0 \colon C_0 \to X$,
      \end{itemize}
      such that the resulting sequence
      \[
        \dotsb
        \to
        C_2
        \xlongto{d_2}
        C_1
        \xlongto{d_1}
        C_0
        \xlongto{p_0}
        X
        \to
        0
      \]
      is exact.
    \item
      A \emph{projective resolution}\index{projective!resolution}\index{resolution!projective} of~$X$ is a chain resolution~$(\Pcc, p_0)$ of~$X$ in which~$P_n$ is projective for every~$n \geq 0$.
    \item
      A \emph{cochain resolution}\index{cochain!resolution}\index{resolution!cochain} of~$X$ is a pair~$(\Cccc, i^0)$ consisting of
      \begin{itemize}
        \item
          a cochain complex~$\Cccc \in \CChh^{\geq 0}(\Acat)$ bounded below by degree~$0$, together with
        \item
          a morphism~$i^0 \colon X \to C^0$,
      \end{itemize}
      such that the resulting sequence
      \[
        0
        \to
        X
        \xlongto{i^0}
        C_0
        \xlongto{d^0}
        C_1
        \xlongto{d^1}
        C_2
        \to
        \dotsb
      \]
      is exact.
    \item
      An \emph{injective resolution}\index{injective!resolution}\index{resolution!injective} of~$X$ is a cochain resolution~$(\Iccc, i^0)$ of~$X$ in which~$I_n$ is injective for every~$n \geq 0$.
  \end{enumerate}
\end{definition}


\begin{remark}
  Let~$X \in \Ob(\Acat)$ be an object in~$\Acat$.
  \begin{enumerate}
    \item
      We can consider the object~$X$ as a chain (respectively cochain) complex that is concentrated in degree~$0$.
      Then~$\Hl_0(X) = X$ (respectively $\Hl^0(X) = X$) and~$\Hl_n(X) = 0$ (respectively $\Hl^n(X) = 0$) for every~$n \neq 0$.
    \item
      For a chain complex~$\Ccc \in \Ch(\Acat)$, a morphism~$f \colon \Ccc \to X$ is uniquely determined by the single morphism~$C_0 \to X$ (for all~$n \neq 0$ it holds that~$f_n = 0$), and the morphism~$f_0$ is subject to the single conditions~$f_0 d_1 = 0$.
      Indeed, this is precisely what it means for the following diagram to commute:
      \[
        \begin{tikzcd}
            \dotsb
            \arrow{r}
          & C_2
            \arrow{r}[above]{d_2}
            \arrow{d}
          & C_1
            \arrow{r}[above]{d_1}
            \arrow{d}
          & C_0
            \arrow{r}[above]{d_0}
            \arrow{d}[right]{f_0}
          & C_{-1}
            \arrow{r}[above]{d_{-1}}
            \arrow{d}
          & C_{-2}
            \arrow{r}
            \arrow{d}
          & \dotsb
          \\
            \dotsb
            \arrow{r}
          & 0
            \arrow{r}
          & 0
            \arrow{r}
          & X
            \arrow{r}
          & 0
            \arrow{r}
          & 0
            \arrow{r}
          & \dotsb
        \end{tikzcd}
      \]
    \item
      For a cochain complex~$\Cccc \in \CCh(\Acat)$, a morphism~$f \colon X \to \Cccc$ is uniquely determined by the single morphism~$f^0 \colon X \to C^0$ (for all~$n \neq 0$ it holds that~$f^n = 0$), and the morphism~$f^0$ is subject to the single condition~$d^0 f^0 = 0$.
      Indeed, this is precisely what it means for the following diagram to commute:
      \[
        \begin{tikzcd}
            \dotsb
            \arrow{r}
          & 0
            \arrow{r}
            \arrow{d}
          & 0
            \arrow{r}
            \arrow{d}
          & X
            \arrow{r}
            \arrow{d}[right]{f^0}
          & 0
            \arrow{r}
            \arrow{d}
          & 0
            \arrow{r}
            \arrow{d}
          & \dotsb
          \\
            \dotsb
            \arrow{r}
          & C^{-2}
            \arrow{r}[above]{d^{-2}}
          & C^{-1}
            \arrow{r}[above]{d^{-1}}
          & C^0
            \arrow{r}[above]{d^0}
          & C^1
            \arrow{r}[above]{d^1}
          & C^2
            \arrow{r}
          & \dotsb
        \end{tikzcd}
      \]
  \end{enumerate}
\end{remark}


\begin{lemma}
  Let~$X \in \Ob(\Acat)$ be an object in~$\Acat$.
  \begin{enumerate}
    \item
      \label{resolution iff qim}
      Let~$\Ccc \in \Chh_{\geq 0}(\Acat)$ be a chain complex that is bounded below by degree~$0$, and let~$p_0 \colon C_0 \to X$ be a morphism with~$p_0 d_1 = 0$.
      Let~$p \colon \Ccc \to X$ be the corresponding morphism of chain complexes.
      Then the pair~$(\Ccc, p_0)$ is a chain resolution of~$X$ if and only if the morphism of chain complexes~$p$ is a {\qim}.
    \item
      \label{coresolution iff qim}
      Let~$\Cccc \in \CChh^{\geq 0}(\Acat)$ be a cochain complex this is bounded below by degree~$0$, and let~$i^0 \colon X \to C^0$ be a morphism with~$d^0 i^0 = 0$.
      Let~$i \colon X \to \Cccc$ be the corresponding morphism of cochain complexes.
      Then the pair~$(\Cccc, i^0)$ is a cochain resolution of~$X$ if and only if the morphism of cochain complexes~$i$ is a {\qim}.
  \end{enumerate}
\end{lemma}


\begin{proof}
  It suffices to prove part~\ref*{resolution iff qim}, as part~\ref*{coresolution iff qim} follows by duality.
  
  That~$(\Ccc, p_0)$ is a chain resolution of~$X$, i.e., that the sequence
  \[
    \dotsb
    \to
    C_2
    \xlongto{d_2}
    C_1
    \xlongto{d_1}
    C_0
    \xlongto{p_0}
    X
    \to
    0
  \]
  is exact, means that~$\Hl_n(\Ccc) = 0$ for every~$n \neq 0$, that~$C_1 \xto{d_1} C_0 \xto{p_0} X \to 0$ is exact.
  That the morphism~$p \colon \Ccc \to X$ given by the commutative diagram
  \[
    \begin{tikzcd}
        \dotsb
        \arrow{r}
      & C_2
        \arrow{r}[above]{d_2}
        \arrow{d}
      & C_1
        \arrow{r}[above]{d_1}
        \arrow{d}
      & C_0
        \arrow{r}
        \arrow{d}[right]{p_0}
      & 0
        \arrow{r}
        \arrow{d}
      & 0
        \arrow{r}
        \arrow{d}
      & \dotsb
      \\
        \dotsb
        \arrow{r}
      & 0
        \arrow{r}
      & 0
        \arrow{r}
      & X
        \arrow{r}
      & 0
        \arrow{r}
      & 0
        \arrow{r}
      & \dotsb
    \end{tikzcd}
  \]
  is a {\qim} means that~$\Hl_n(\Ccc) = 0$ for every~$n \neq 0$ and that the induced morphism~$\coker(d_1) \to X$ is an isomorphism.
  This induced morphism is the unique morphism that makes the triangle
  \[
    \begin{tikzcd}
        C_0
        \arrow{r}
        \arrow{dr}[below left]{p_0}
      & \coker(d_1)
        \arrow[dashed]{d}
      \\
        {}
      & X
    \end{tikzcd}
  \]
  commute.
  The commutativity of this triangle together with~$\coker(d_1) \to X$ being an isomorphism is equivalent to~$p_0$ being a cokernel of~$d_1$, which is in turn equivalent to the exactness of the sequence~$C_1 \xto{d_1} C_0 \xto{p_0} X \to 0$.
\end{proof}


\begin{lemma}
  \leavevmode
  \begin{enumerate}
    \item
      \label{existence of projective resolution}
      If the category~$\Acat$ has enough projectives, then every object~$X \in \Ob(\Acat)$ admits a projective resolution.
    \item
      \label{existence of injective resolution}
      If the category~$\Acat$ has enough injectives, then every object~$X \in \Ob(\Acat)$ admits an injective resolution.
  \end{enumerate}
\end{lemma}


\begin{proof}
  It suffices to prove part~\ref*{existence of projective resolution}, as part~\ref*{existence of injective resolution} follows from part~\ref*{existence of projective resolution} by duality.
  So suppose that the abelian category~$\Acat$ has enough projectives.
  
  For any object~$X \in \Ob(\Acat)$ there exists by assumption an epimorphism~$p_0 \colon P_0 \to X$ for some projective object~$P_0$ in~$\Acat$.
  We have thus an exact sequence.
  \[
    P_0
    \xlongto{p_0}
    X
    \to
    0 \,.
  \]
  Suppose now that we have already constructed an exact sequence
  \[
    P_n
    \xlongto{d_n}
    P_{n-1}
    \xlongto{d_{n-1}}
    \dotsb
    \xlongto{d_1}
    P_0
    \xlongto{p_0}
    X
    \to
    0
  \]
  for some~$n \geq 0$.
  For the kernel~$\ker(d_n)$ there exists an epimorphism
  \[
    \tilde{d}_{n+1}
    \colon
    P_{n+1}
    \to
    \ker(d_n)
  \]
  for some projective object~$P_{n+1}$ in~$\Acat$.
  It follows for the composition
  \[
    d_{n+1}
    \colon
    P_{n+1}
    \xlongto{\tilde{d}_{n+1}}
    \ker(d_n)
    \to
    P_n
  \]
  from the exactness of the sequence
  \[
    \ker(d_n)
    \to
    P_n
    \xlongto{d_n}
    P_{n-1}
  \]
  that the sequence
  \[
    P_{n+1}
    \xlongto{d_{n+1}}
    P_n
    \xlongto{d_n}
    P_{n-1}
  \]
  is again exact, as seen in~\cref{composing exact sequence with epi and mono}.
  We hence arrive at the exact sequence
  \[
    P_{n+1}
    \xlongto{d_{n+1}}
    P_n
    \xlongto{d_n}
    P_{n-1}
    \xlongto{d_{n-1}}
    \dotsb
    \xlongto{d_1}
    P_0
    \xlongto{p_0}
    X
    \to
    0 \,.
  \]
  By induction, we get the desired projective resolution of~$X$.
%   Let~$d_{n+1} \colon P_{n+1} \to P_n$ be the composition
%   \[
%     d_{n+1}
%     \colon
%     P_{n+1}
%     \xlongto{\tilde{d}_{n+1}}
%     \ker(d_n)
%     \to
%     P_n \,.
%   \]
%   Then
%   \[
%       \im(d_{n+1})
%     = \im(\ker(d_n) \to P_n)
%     = \ker(d_n) \,,
%   \]
%   where the first equality holds because~$\tilde{d}_{n+1}$ is an epimorphism, and the second equality because every monomorphism is the kernel of its cokernel.
\end{proof}


\begin{example}
  We give a short overview about which abelian categories have enough projectives or enough injectives.
  (Details on this will be given in the upcoming Chapter~6.)
  \begin{center}
    \begin{tabular}{@{}lll@{}}
      \toprule
        \textbf{category}
      & \textbf{enough projectives}
      & \textbf{enough injectives}
      \\
      \midrule
      $\Modl{A}$ and~$\Modr{A}$
      & \multirow{2}{*}{Yes}
      & \multirow{2}{*}{Yes}
      \\
      where~$A$ is a~{\kalg}
      &
      {}
      &
      {}
      \\
      \cmidrule(r){1-1}
        $\Sheaf_X(\Ab)$
      & No (in general)
      & Yes
      \\
      \cmidrule(r){1-1}
        $\Presheaf_X(\Ab)$
      & Yes
      & Yes
      \\
      \cmidrule(r){1-1}
        $\Modlfg{\Integer}$
      & Yes
      & No
      \\
      \cmidrule(r){1-1}
        $\Modlfd{A}$ and~$\Modrfd{A}$
      & \multirow{3}{*}{Yes}
      & \multirow{3}{*}{Yes}
      \\
        where~$\kf$ is a field
      & {}
      & {}
      \\
        and~$A$ is a f.d.~{\kalg}
      & {}
      & {}
      \\
      \bottomrule
    \end{tabular}
  \end{center}
\end{example}





\lecturend{19}





\begin{theorem}[Comparison theorem]\index{comparison theorem}\index{theorem!comparison}
  \label{comparison theorem}
  Let~$f \colon X \to Y$ be a morphism in~$\Acat$.
  \begin{enumerate}
    \item
      \label{comparison for projective}
      Let~$\Pcc \xto{p_0} X$ be a projective resolution of~$X$ and let~$\Ccc \xto{c_0} Y$ be a chain resolution of~$Y$.
      Then there exists a morphism of chain complexes~$\hat{f} \colon \Pcc \to \Ccc$ that makes the square
      \begin{equation}
        \label{comparison square for projective}
        \begin{tikzcd}
            P_0
            \arrow{r}[above]{p_0}
            \arrow[dashed]{d}[left]{\hat{f}_0}
          & X
            \arrow{d}[right]{f}
          \\
            C_0
            \arrow{r}[above]{c_0}
          & Y
        \end{tikzcd}
      \end{equation}
      commute.
      The morphism~$\hat{f}$ is up to homotopy uniquely determined  by the commutativity of the above square.
    \item
      \label{comparison for injective}
      Let~$Y \xto{i^0} \Iccc$ be an injective resolution of~$Y$ and let~$X \xto{c^0} \Cccc$ be a cochain resolution of~$X$.
      Then there exists a morphism of cochain complexes~$\hat{f} \colon \Cccc \to \Iccc$ that makes the square
      \begin{equation}
        \label{comparison square for injective}
        \begin{tikzcd}
            X
            \arrow{r}[above]{c^0}
            \arrow{d}[left]{f}
          & C^0
            \arrow[dashed]{d}[right]{\hat{f}^0}
          \\
            Y
            \arrow{r}[above]{i^0}
          & I^0
        \end{tikzcd}
      \end{equation}
      commute.
      The morphism~$\hat{f}$ is up to homotopy uniquely determined by the commutativity of the above square.
  \end{enumerate}
\end{theorem}


\begin{proof}
  It suffices to prove part~\ref*{comparison for projective}, as part~\ref*{comparison for injective} follows from part~\ref*{comparison for projective} by duality.
  We first construct the morphism~$\hat{f}$, and then show that it is unique up to homotopy.
  
  We set for~$P_{-1} \defined X$ and~$P_{-2} \defined 0$ with~$d^P_0 \defined p_0$ and~$d^P_{-1} = 0$, and we similarly set~$C_{-1} \defined Y$ and~$C_{-2} \defined 0$ with~$d^C_0 = c_0$ and~$d^C_{-1} = 0$.
  We also set $\hat{f}_{-1} \defined f$ and~$\hat{f}_{-2} = 0$.
  The given commutative diagram
  \[
    \begin{tikzcd}
        \dotsb
        \arrow{r}
      & P_2
        \arrow{r}[above]{d_2}
      & P_1
        \arrow{r}[above]{d_1}
      & P_0
        \arrow{r}[above]{p_0}
      & X
        \arrow{r}
        \arrow{d}[right]{f}
      & 0
        \arrow{d}
      \\
        \dotsb
        \arrow{r}
      & C_2
        \arrow{r}[below]{d_2}
      & C_1
        \arrow{r}[below]{d_1}
      & C_0
        \arrow{r}[below]{c_0}
      & Y
        \arrow{r}
      & 0
    \end{tikzcd}
  \]
  is hence the following commutative diagram:
  \[
    \begin{tikzcd}
        \dotsb
        \arrow{r}
      & P_2
        \arrow{r}[above]{d_2}
      & P_1
        \arrow{r}[above]{d_1}
      & P_0
        \arrow{r}[above]{d_0}
      & P_{-1}
        \arrow{r}[above]{d_{-1}}
        \arrow{d}[right]{\hat{f}_{-1}}
      & P_{-2}
        \arrow{d}[right]{\hat{f}_{-2}}
      \\
        \dotsb
        \arrow{r}
      & C_2
        \arrow{r}[below]{d_2}
      & C_1
        \arrow{r}[below]{d_1}
      & C_0
        \arrow{r}[below]{d_0}
      & C_{-1}
        \arrow{r}[below]{d_{-1}}
      & C_{-2}
    \end{tikzcd}
  \]
  This commutative diagram has exact rows and the object~$P_n$ is projective for every~$n \geq 0$.
  
  We construct the required morphisms~$\hat{f}_n \colon P_n \to C_n$ by induction over~$n \geq -2$, with~$\hat{f}_{-1}$ and~$\hat{f}_{-2}$ being already given.
  So suppose more generally that we have already constructed morphisms~$\hat{f}_n, \dotsc, \hat{f}_0, \hat{f}_{-1}, \hat{f}_{-2}$ for some~$n \geq -1$ that make the diagram
  \[
    \begin{tikzcd}
        P_n
        \arrow{r}[above]{d_n}
        \arrow{d}[right]{\hat{f}_n}
      & P_{n-1}
        \arrow{r}[above]{d_{n-1}}
        \arrow{d}[right]{\hat{f}_{n-1}}
      & \dotsb
        \arrow{r}[above]{d_1}
      & P_0
        \arrow{r}[above]{d_0}
        \arrow{d}[right]{\hat{f}_0}
      & P_{-1}
        \arrow{r}
        \arrow{d}[right]{\hat{f}_{-1}}
      & P_{-2}
        \arrow{d}[right]{\hat{f}_{-2}}
      \\
        C_n
        \arrow{r}[below]{d_n}
      & C_{n-1}
        \arrow{r}[below]{d_{n-1}}
      & \dotsb
        \arrow{r}[below]{d_1}
      & C_0
        \arrow{r}[below]{d_0}
      & C_{-1}
        \arrow{r}
      & C_{-2}
    \end{tikzcd}
  \]
  commute.
  It follows from~$d^P_n d^P_{n+1} = 0$ and~$d^C_n d^C_{n+1} = 0$ that the differentials~$d^P$ and~$d^C$ induce morphisms~$p \colon P_{n+1} \to \ker(d^P_n)$ and~$q \colon C_{n+1} \to \ker(d^C_n)$ that make the triangles
  \[
    \begin{tikzcd}[column sep = tiny]
        P_{n+1}
        \arrow{rr}[above]{d_{n+1}}
        \arrow[dashed]{dr}[below left]{p}
      & {}
      & P_n
      \\
        {}
      & \ker(d_n)
        \arrow{ur}[below right]{i}
      & {}
    \end{tikzcd}
    \qquad\text{and}\qquad
    \begin{tikzcd}[column sep = tiny]
        C_{n+1}
        \arrow{rr}[above]{d_{n+1}}
        \arrow[dashed]{dr}[below left]{q}
      & {}
      & C_n
      \\
        {}
      & \ker(d_n)
        \arrow{ur}[below right]{j}
      & {}
    \end{tikzcd}
  \]
  commute.
  It follows from the commutativity of the square
  \[
    \begin{tikzcd}
        P_n
        \arrow{r}[above]{d_n}
        \arrow{d}[left]{\hat{f}_n}
      & P_{n-1}
        \arrow{d}[right]{\hat{f}_{n-1}}
      \\
        C_n
        \arrow{r}[above]{d_n}
      & C_{n-1}
    \end{tikzcd}
  \]
  that the morphism~$\hat{f}_n \colon P_n \to C_n$ induces a morphism~$\tilde{f}_n \colon \ker(d^P_n) \to \ker(d^C_n)$ that makes the following diagram commute:
  \[
    \begin{tikzcd}[column sep = small, cramped]
        P_{n+1}
        \arrow{rrr}[above, near start]{d_{n+1}}
        \arrow{drr}[below left]{p}
      & {}
      & {}
      & P_n
        \arrow{dd}[right]{\hat{f}_n}
      \\
        {}
      & {}
      & \ker(d_n)
        \arrow{ur}[below right]{i}
      & {}
      \\
        C_{n+1}
        \arrow{rrr}[above, near start]{d_{n+1}}
        \arrow{drr}[below left]{q}
      & {}
      & {}
      & C_n
      \\
        {}
      & {}
      & \ker(d_n)
        \arrow[dashed, from=uu, crossing over, "\tilde{f}_n", right, near start]
        \arrow{ur}[below right]{j}
      & {}
    \end{tikzcd}
  \]
  The morphism~$q \colon C_{n+1} \to \ker(d^C_n)$ is an epimorphism because it is the composition
  \[
    q
    \colon
    C_{n+1}
    \to
    \im(d^C_{n+1})
    \to
    \ker(d^C_n)
  \]
  with~$C_{n+1} \to \im(d_{n+1})$ being an epimorphism, and~$\im(d^C_{n+1}) \to \ker(d^C_n)$ being an isomorphism by the exactness of the sequence~$C_{n+1} \xto{d_{n+1}} C_n \xto{d_n} C_{n-1}$.
  It follows from~$P_{n+1}$ being projective that there exist a morphism~$\hat{f}_{n+1} \colon P_{n+1} \to C_{n+1}$ that makes the square
  \[
    \begin{tikzcd}
        P_{n+1}
        \arrow{r}[above]{p}
        \arrow[dashed]{d}[left]{\hat{f}_{n+1}}
      & \ker(d_n)
        \arrow{d}[right]{\tilde{f}_n}
      \\
        C_{n+1}
        \arrow{r}[below]{q}
      & \ker(d_n)
    \end{tikzcd}
  \]
  commute.
  Then also the square
  \[
    \begin{tikzcd}[column sep = large]
        P_{n+1}
        \arrow{r}[above]{d_{n+1}}
        \arrow[dashed]{d}[left]{\hat{f}_{n+1}}
      & P_n
        \arrow{d}[right]{\hat{f}_n}
      \\
        C_{n+1}
        \arrow{r}[above]{d_n}
      & C_n
    \end{tikzcd}
  \]
  commute, i.e., the complete diagram
  \[
    \begin{tikzcd}[column sep = small, cramped]
        P_{n+1}
        \arrow{rrr}[above, near start]{d_{n+1}}
        \arrow{drr}[below left]{p}
        \arrow[dashed]{dd}[left]{\hat{f}_{n+1}}
      & {}
      & {}
      & P_n
        \arrow{dd}[right]{\hat{f}_n}
      \\
        {}
      & {}
      & \ker(d_n)
        \arrow{ur}[below right]{i}
      & {}
      \\
        C_{n+1}
        \arrow{rrr}[above, near start]{d_{n+1}}
        \arrow{drr}[below left]{q}
      & {}
      & {}
      & C_n
      \\
        {}
      & {}
      & \ker(d_n)
        \arrow[from=uu, crossing over, "\tilde{f}_n", right, near start]
        \arrow{ur}[below right]{j}
      & {}
    \end{tikzcd}
  \]
  commutes.
  Indeed, we have that
  \[
      d_{n+1} \hat{f}_{n+1}
    = j q \hat{f}_{n+1}
    = j \tilde{f}_n p
    = \hat{f}_n i p
    = \hat{f}_n d_{n+1} \,.
  \]
  
  To show that the morphism~$\hat{f}$ is unique up to homotopy we may assume that~$f = 0$:
  Indeed, if~$\hat{f}' \colon \Pcc \to \Ccc$ is another lift of~$f \colon X \to Y$ then the difference~$\hat{f}' - \hat{f}$ is a lift of~$f - f = 0$.
  And the morphisms~$\hat{f}'$ and~$\hat{f}$ are homotopic if and only if this difference~$\hat{f}' - \hat{f}$ is null homotopic, i.e., is homotopic to the zero morphism~$\Pcc \to \Ccc$, which is another lift of the zero morphism~$X \to Y$.
  
  So let~$f = 0$, and let us shows that any lift~$\hat{f} \colon \Pcc \to \Ccc$ is null homotopic.
  For this we need to construct morphisms~$s_n \colon P_n \to C_{n+1}$ for~$n \geq 0$ such that
  \[
    d_1 s_0 = \hat{f}_0
    \qquad\text{and}\qquad
    \text{$d_{n+1} s_n + s_{n-1} d_n = \hat{f}_n$ for every~$n \geq 1$} \,.
  \]
  We may visualize the role of the morphisms~$s_n$ as follows:
  \[
    \begin{tikzcd}[row sep = large]
        \dotsb
        \arrow{r}
      & P_2
        \arrow{r}[above]{d_2}
        \arrow{d}[right, near start]{\hat{f}_2}
        \arrow[dashed]{dl}
      & P_1
        \arrow{r}[above]{d_1}
        \arrow{d}[right, near start]{\hat{f}_1}
        \arrow[dashed]{dl}[below right]{s_1}
      & P_0
        \arrow{r}[above]{d_0}
        \arrow{d}[right]{\hat{f}_0}
        \arrow[dashed]{dl}[below right]{s_0}
      & P_{-1}
        \arrow{r}{d_{-1}}
        \arrow{d}[right]{0}
      & P_{-2}
        \arrow{d}[right]{0}
      \\
        \dotsb
        \arrow{r}
      & C_2
        \arrow{r}[below]{d_2}
      & C_1
        \arrow{r}[below]{d_1}
      & C_0
        \arrow{r}[below]{d_0}
      & C_{-1}
        \arrow{r}[below]{d_{-1}}
      & C_{-2}
    \end{tikzcd}
  \]
  We define~$s_{-1} \colon P_{-1} \to C_0$ and~$s_{-2} \colon P_{-2} \to C_{-1}$ as the respective zero morphisms, and hence need to show that
  \[
      \hat{f}_n
    = d_{n+1} s_n + s_{n-1} d_n
  \]
  for every~$n \geq -1$, with this relation already holding for~$n = -1$.
  
  Suppose that~$s_{n-1}, \dotsc, s_{-1}, s_{-2}$ are already constructed for some~$n \geq 0$.
  Then the morphism
  \[
    \hat{f}_n - s_{n-1} d_n
    \colon
    P_n
    \to
    C_n
  \]
  satisfies
  \begin{align*}
        d_n ( \hat{f}_n - s_{n-1} d_n)
    &=  d_n \hat{f}_n - d_n s_{n-1} d_n \\
    &=  d_n \hat{f}_n - ( \hat{f}_{n-1} - s_{n-2} d_{n-1} ) d_n  \\
    &=  d_n \hat{f}_n - \hat{f}_{n-1} d_n  \\
    &=  0
  \end{align*}
  because~$\hat{f}$ is a morphism of chain complexes.
  It follows from the universal property of the kernel~$\ker(d_n) \to C_n$ that there exists a (unique) morphism~$\tilde{s}_n \colon P_n \to \ker(d_n)$ that makes the diagram
  \[
    \begin{tikzcd}
        {}
      & P_n
        \arrow[bend left]{drr}[above right]{0}
        \arrow{d}[right]{\hat{f}_n - s_{n-1} d_n}
        \arrow[dashed]{dl}[above left]{\tilde{s}_n}
      & {}
      \\
        \ker(d_n)
        \arrow{r}
      & C_n
        \arrow{rr}[below]{d_n}
      & {}
      & C_{n+1}
    \end{tikzcd}
  \]
  commute.
  The canonical morphism~$C_{n+1} \to \ker(d_n)$ that makes the diagram
  \[
    \begin{tikzcd}
        C_{n+1}
        \arrow[dashed]{r}
        \arrow[bend right]{rr}[below]{d_{n+1}}
      & \ker(d_n)
        \arrow{r}
      & C_n
    \end{tikzcd}
  \]
  commute is an epimorphism by the exactness of the sequence~$C_{n+1} \to C_n \to C_{n-1}$, as seen in the previous part of the proof.
  It follows from~$P_n$ being projective that there exists a morphism~$s_n \colon P_n \to C_{n+1}$ that makes the diagram
  \[
    \begin{tikzcd}
        {}
      & {}
      & P_n
        \arrow{d}[right]{\hat{f}_n - s_{n-1} d_n}
        \arrow{dl}[above left]{\tilde{s}_n}
        \arrow[dashed, bend right]{dll}[above left]{s_n}
      \\
        C_{n+1}
        \arrow{r}
        \arrow[bend right]{rr}[below]{d_{n+1}}
      & \ker(d_n)
        \arrow{r}
      & C_n
    \end{tikzcd}
  \]
  commute.
  Then
  \[
      d_{n+1} s_n + s_{n-1} d_n
    = \hat{f}_n - s_{n-1} d_n + s_{n-1} d_n
    = \hat{f}_n \,,
  \]
  as desired.
\end{proof}


\begin{remark*}
  One may rewrite the commutative square~\eqref{comparison square for projective} as
  \[
    \begin{tikzcd}
        \Pcc
        \arrow{r}[above]{p_0}
        \arrow[dashed]{d}[left]{\hat{f}}
      & X
        \arrow{d}[right]{f}
      \\
        \Ccc
        \arrow{r}[above]{c_0}
      & Y
    \end{tikzcd}
  \]
  and the commutative square~\eqref{comparison square for injective} as follows:
  \[
    \begin{tikzcd}
        X
        \arrow{r}[above]{c^0}
        \arrow{d}[left]{f}
      & \Cccc
        \arrow[dashed]{d}[right]{\hat{f}}
      \\
        Y
        \arrow{r}[above]{i^0}
      & \Iccc
    \end{tikzcd}
  \]
\end{remark*}


\begin{corollary*}
  \leavevmode
  \begin{enumerate}
    \item
      \label{he of projective resolutions}
      Any two projections resolutions~$(\Pcc, p_0)$ and~$(\Pcc', p'_0)$ of an object~$X \in \Ob(\Acat)$ are homotopy equivalent.
    \item
      \label{he of injective resolutions}
      Any two injective resolutions~$(\Iccc, i^0)$ and~$(\bp\Iccc, \bp i^0)$ of an object~$X \in \Ob(\Acat)$ are homotopy equivalent.
  \end{enumerate}
\end{corollary*}


\begin{proof}
  It suffices to prove part~\ref*{he of projective resolutions}, as part~\ref*{he of injective resolutions} follows from part~\ref*{he of projective resolutions} by duality.
  It follows from the \hyperref[comparison theorem]{comparison theorem} that there exists lifts~$f \colon \Pcc \to \Pcc'$ and~$g \colon \Pcc' \to \Pcc$ of the identity~$\id_X \colon X \to X$.
  The composition~$g \circ f \colon \Pcc \to \Pcc$ is then a lift of the composition~$\id_X \circ \id_X = \id_X$.
  The identity~$\id_{\Pcc} \colon \Pcc \to \Pcc$ is also a lift of~$\id_X$, hence~$g \circ f$ and~$\id_{\Pcc}$ are homotopic by the \hyperref[comparison theorem]{comparison theorem}.
  We find similarly that the composition~$f \circ g$ is homotopic to the identity~$\id_{\Pcc'}$.
\end{proof}


\begin{lemma}[Horseshoe lemma]\index{horseshoe lemma}\index{lemma!horseshoe}
  \label{horseshoe lemma}
  \leavevmode
  \begin{enumerate}
    \item
      \label{projective horseshoe}
      Let~$0 \to X' \to X \to X'' \to 0$ be a short exact sequence in~$\Acat$.
      If~$\Pcc' \xto{p'_0} X'$ and~$\Pcc'' \xto{p''_0} X''$ are projective resolutions then there exists a projective resolution~$\Pcc \xto{p_0} X$ of~$X$ such that the short exact sequence~$0 \to X' \to X \to X'' \to 0$ lifts to a short exact sequence of chain complexes
      \[
        0
        \to
        \Pcc'
        \to
        \Pcc
        \to
        \Pcc''
        \to
        0 \,,
      \]
      in the sense that the following diagram commutes: 
      \[
        \begin{tikzcd}
            0
            \arrow{r}
          & \Pcc'
            \arrow{r}
            \arrow{d}[right]{p'_0}
          & \Pcc
            \arrow{r}
            \arrow{d}[right]{p_0}
          & \Pcc''
            \arrow{r}
            \arrow{d}[right]{p''_0}
          & 0
          \\
            0
            \arrow{r}
          & X'
            \arrow{r}
          & X
            \arrow{r}
          & X''
            \arrow{r}
          & 0
        \end{tikzcd}
      \]
      In other words, the following diagram commutes:
      \[
        \begin{tikzcd}
            0
            \arrow{r}
          & P'_0
            \arrow{r}
            \arrow{d}[right]{p'_0}
          & P_0
            \arrow{r}
            \arrow{d}[right]{p_0}
          & P''_0
            \arrow{r}
            \arrow{d}[right]{p''_0}
          & 0
          \\
            0
            \arrow{r}
          & X'
            \arrow{r}
          & X
            \arrow{r}
          & X''
            \arrow{r}
          & 0
        \end{tikzcd}
      \]
      The short exact sequence~$0 \to \Pcc' \to \Pcc \to \Pcc'' \to 0$ can moreover be chosen such that in every degree~$n$, the short exact sequence~$0 \to P'_n \to P_n \to P''_n \to 0$ splits.
    \item
      \label{injective horseshoe}
      Let~$0 \to \bp X \to X \to \bpp X \to 0$ be a short exact sequence in~$\Acat$.
      If~$\bp X \xto{\bp i^0} \bp\Iccc$ and~$\bpp X \xto{\bpp i^0} \bpp\Iccc$ are injective resolutions then there exists an injective resolution~$X \xto{i^0} \Iccc$ of~$X$ such that the short exact sequence~$0 \to \bp X \to X \to \bpp X \to 0$ extends to a short exact sequence of cochain complexes
      \[
        0
        \to
        \bp\Iccc
        \to
        \Iccc
        \to
        \bpp\Iccc
        \to
        0 \,,
      \]
      in the sense that the following diagram commutes:
      \[
        \begin{tikzcd}
            0
            \arrow{r}
          & \bp X
            \arrow{r}
            \arrow{d}[right]{\bp i^0}
          & X
            \arrow{r}
            \arrow{d}[right]{i^0}
          & \bpp X
            \arrow{r}
            \arrow{d}[right]{\bpp i^0}
          & 0
          \\
            0
            \arrow{r}
          & \bp\Iccc
            \arrow{r}
          & \Iccc
            \arrow{r}
          & \bpp\Iccc
            \arrow{r}
          & 0
        \end{tikzcd}
      \]
      In other words, the following diagram commutes:
      \[
        \begin{tikzcd}
            0
            \arrow{r}
          & \bp X
            \arrow{r}
            \arrow{d}[right]{\bp i^0}
          & X
            \arrow{r}
            \arrow{d}[right]{i^0}
          & \bpp X
            \arrow{r}
            \arrow{d}[right]{\bpp i^0}
          & 0
          \\
            0
            \arrow{r}
          & \bp I^0
            \arrow{r}
          & I^0
            \arrow{r}
          & \bpp I^0
            \arrow{r}
          & 0
        \end{tikzcd}
      \]
      The short exact sequence~$0 \to \bp\Iccc \to \Iccc \to \bpp\Iccc \to 0$ can moreover be chosen such that in every degree~$n$, the short exact sequence~$0 \to \bp I^n \to I^n \to \bpp I^n \to 0$ splits.
  \end{enumerate}
\end{lemma}


\begin{proof}
  It suffices to prove part~\ref*{projective horseshoe}, as part~\ref*{injective horseshoe} follows from part~\ref*{projective horseshoe} by duality.
  We denote the given short exact sequence by
  \[
    0
    \to
    X'
    \xlongto{f}
    X
    \xlongto{g}
    X''
    \to
    0 \,.
  \]
  
  We set~$P_n \defined P'_n \oplus P''_n$ for every~$n \geq 0$, and consider for every~$n \geq 0$ the short exact sequence
  \[
    0
    \to
    P'_n
    \xlongto{ \begin{bsmallmatrix} \id \\ 0 \end{bsmallmatrix} }
    P_n
    \xlongto{ \begin{bsmallmatrix} 0 & \id \end{bsmallmatrix} }
    P''_n
    \to
    0 \,.
  \]
  We need to construct morphisms~$d_n \colon P_n \to P_{n-1}$ and~$p_0 \colon P_0 \to X$ that make the diagram
  \[
    \begin{tikzcd}[ampersand replacement = \&, column sep = large]
          {}
      \&  \vdots
          \arrow{d}
      \&  \vdots
          \arrow[dashed]{d}
      \&  \vdots
          \arrow{d}
      \&  {}
      \\
          0
          \arrow{r}
      \&  P'_2
          \arrow{r}[above]{\begin{bsmallmatrix} \id \\ 0 \end{bsmallmatrix}}
          \arrow{d}[left]{d'_2}
      \&  P_2
          \arrow{r}[above]{\begin{bsmallmatrix} 0 & \id \end{bsmallmatrix}}
          \arrow[dashed]{d}[right]{d_2}
      \&  P''_2
          \arrow{r}
          \arrow{d}[right]{d''_2}
      \&  0
      \\
          0
          \arrow{r}
      \&  P'_1
          \arrow{r}[above]{\begin{bsmallmatrix} \id \\ 0 \end{bsmallmatrix}}
          \arrow{d}[left]{d'_1}
      \&  P_1
          \arrow{r}[above]{\begin{bsmallmatrix} 0 & \id \end{bsmallmatrix}}
          \arrow[dashed]{d}[right]{d_1}
      \&  P''_1
          \arrow{r}
          \arrow{d}[right]{d''_1}
      \&  0
      \\
          0
          \arrow{r}
      \&  P'_0
          \arrow{r}[above]{\begin{bsmallmatrix} \id \\ 0 \end{bsmallmatrix}}
          \arrow{d}[left]{p'_0}
      \&  P_0
          \arrow{r}[above]{\begin{bsmallmatrix} 0 & \id \end{bsmallmatrix}}
          \arrow[dashed]{d}{p_0}
      \&  P''_0
          \arrow{r}
          \arrow{d}[right]{p''_0}
      \&  0
      \\
          0
          \arrow{r}
      \&  X'
          \arrow{r}[above]{f}
          \arrow{d}
      \&  X
          \arrow{r}[above]{g}
          \arrow{d}
      \&  X''
          \arrow{r}
          \arrow{d}
      \&  0
      \\
          {}
      \&  0
      \&  0
      \&  0
      \&  {}
    \end{tikzcd}
  \]
  commute and that make the middle column into a projective resolution of~$X$.
  That the sequence~$0 \to \Pcc' \to \Pcc \to \Pcc'' \to 0$ of chain complexes is then already (short) exact follows because exactness in~$\Ch(\Acat)$ is component componentwise (as explained in \cref{exactness for chain complexes is computed degreewise}).
  
  We start by constructing the morphism~$p_0$:
  We have the following diagram in which the morphism~$g$ is an epimorphism and the object~$P''_0$ is projective:
  \[
    \begin{tikzcd}
        {}
      & P'_0
        \arrow{d}[right]{p'_0}
      & {}
      & P''_0
        \arrow{d}[right]{p''_0}
      & {}
      \\
        0
        \arrow{r}
      & X'
        \arrow{r}[above]{f}
        \arrow{d}
      & X
        \arrow{r}[above]{g}
      & X'' 
        \arrow{r}
        \arrow{d}
      & 0
      \\
        {}
      & 0
      & {}
      & 0
      & {}
    \end{tikzcd}
  \]
  It follows that there exist a morphism~$g' \colon P''_0 \to X$ that makes the triangle
  \[
    \begin{tikzcd}
        {}
      & P''_0
        \arrow{d}[right]{p''_0}
        \arrow[dashed]{dl}[above left]{g'}
      \\
        X
        \arrow{r}[below]{g}
      & X''
    \end{tikzcd}
  \]
  commute.
  We define
  \[
    p_0
    \defined
    \begin{bmatrix}
      f p'_0  & g'
    \end{bmatrix}
    \colon
    P_0
    =
    P'_0 \oplus P''_0
    \to
    X \,.
  \]
  Then the diagram
  \[
    \begin{tikzcd}[ampersand replacement = \&]
          0
          \arrow{r}
      \&  P'_0
          \arrow{r}[above]{\begin{bsmallmatrix} \id \\ 0 \end{bsmallmatrix}}
          \arrow{d}[left]{p'_0}
      \&  P_0
          \arrow{r}[above]{\begin{bsmallmatrix} 0 & \id \end{bsmallmatrix}}
          \arrow[dashed]{d}[right]{p_0}
      \&  P''_0
          \arrow{r}
          \arrow{d}[right]{p''_0}
      \&  0
      \\
          0
          \arrow{r}
      \&  X'
          \arrow{r}[above]{f}
      \&  X
          \arrow{r}[above]{g}
      \&  X''
          \arrow{r}
      \&  0
    \end{tikzcd}
  \]
  commutes because
  \begin{gather*}
      p_0
      \begin{bmatrix}
        \id \\
        0
      \end{bmatrix}
    = \begin{bmatrix}
        f p'_0  & g'
      \end{bmatrix}
      \begin{bmatrix}
        \id \\
        0
      \end{bmatrix}
    = f p'_0
  \shortintertext{and}
      g p_0
    = g
      \begin{bmatrix}
        f p'_0  & g'
      \end{bmatrix}
    = \begin{bmatrix}
        g f p'_0  & g g'
      \end{bmatrix}
    = \begin{bmatrix}
        0 & p''_0
      \end{bmatrix}
    = p''_0
      \begin{bmatrix}
        0 & \id
      \end{bmatrix} \,.
  \end{gather*}
  It follows from (part~\ref*{four lemma for epis} of) the~\hyperref[5 lemma]{\dash{5}{lemma}} that the morphisms~$p_0$ is an epimorphism, because both~$p'_0$ and~$p''_0$ are epimorphism.
  We have hence the following commutative diagram with exact columns:
  \[
    \begin{tikzcd}[ampersand replacement = \&, column sep = large]
          {}
      \&  \vdots
          \arrow{d}
      \&  {}
      \&  \vdots
          \arrow{d}
      \&  {}
      \\
          {}
      \&  P'_2
          \arrow{d}[right]{d'_2}
      \&  {}
      \&  P''_2
          \arrow{d}[right]{d''_2}
      \&  {}
      \\
          {}
      \&  P'_1
          \arrow{d}[right]{d'_1}
      \&  {}
      \&  P''_1
          \arrow{d}[right]{d''_1}
      \&  {}
      \\
          0
          \arrow{r}
      \&  P'_0
          \arrow{r}[above]{\begin{bsmallmatrix} \id \\ 0 \end{bsmallmatrix}}
          \arrow{d}[right]{p'_0}
      \&  P_0
          \arrow{r}[above]{\begin{bsmallmatrix} 0 & \id \end{bsmallmatrix}}
          \arrow{d}[right]{p_0}
      \&  P''_0
          \arrow{r}
          \arrow{d}[right]{p''_0}
      \&  0
      \\
          0
          \arrow{r}
      \&  X'
          \arrow{r}[below]{f}
          \arrow{d}
      \&  X
          \arrow{r}[below]{g}
          \arrow{d}
      \&  X''
          \arrow{r}
          \arrow{d}
      \&  0
      \\
          {}
      \&  0
      \&  0
      \&  0
      \&  {}
    \end{tikzcd}
  \]
  
  To construct the morphism~$d_1 \colon P_1 \to P_0$ we proceed similar as before:
  We get the following commutative diagram with exact columns:
  \[
    \begin{tikzcd}[ampersand replacement = \&]
          {}
      \&  0
          \arrow{d}
      \&  0
          \arrow{d}
      \&  0
          \arrow{d}
      \&  {}
      \\
          0
          \arrow{r}
      \&  \ker(p'_0)
          \arrow{r}
          \arrow{d}[right]{\tilde{d}'_0}
      \&  \ker(p_0)
          \arrow{r}
          \arrow{d}[right]{\tilde{d}_0}
      \&  \ker(p''_0)
          \arrow{r}
          \arrow{d}[right]{\tilde{d}''_0}
      \& 0
      \\
          0
          \arrow{r}
      \&  P'_0
          \arrow{r}
          \arrow{d}[right]{p'_0}
      \&  P_0
          \arrow{r}
          \arrow{d}[right]{p_0}
      \&  P''_0
          \arrow{r}
          \arrow{d}[right]{p''_0}
      \&  0
      \\
          0
          \arrow{r}
      \&  X'
          \arrow{r}[below]{f}
          \arrow{d}
      \&  X
          \arrow{r}[below]{g}
          \arrow{d}
      \&  X''
          \arrow{r}
          \arrow{d}
      \&  0
      \\
          {}
      \&  0
      \&  0
      \&  0
      \&  {}
    \end{tikzcd}
  \]
  The lower two rows are exact, hence the upper row is also exact by the~\hyperref[9 lemma]{\dash{9}{lemma}}.
  We can therefore consider the following subdiagram, in which the morphism~$\ker(p_0) \to \ker(p''_0)$ is an epimorphism and the object~$P''_1$ is projective.
  \[
    \begin{tikzcd}
        {}
      & P'_1
        \arrow{d}[right]{\tilde{d}'_1}
      & {}
      & P''_1
        \arrow{d}[right]{\tilde{d}''_1}
      & {}
      \\
        0
        \arrow{r}
      & \ker(p'_0)
        \arrow{r}
        \arrow{d}
      & \ker(p_0)
        \arrow{r}
      & \ker(p''_0)
        \arrow{r}
        \arrow{d}
      & 0
      \\
        {}
      & 0
      & {}
      & 0
      & {}
    \end{tikzcd}
  \]
  We find as before that there exists an epimorphism~$d_1 \colon P_1 \to \ker(p_0)$ that makes the diagram
  \[
    \begin{tikzcd}[ampersand replacement = \&]
          0
          \arrow{r}
      \&  P'_1
          \arrow{r}[above]{\begin{bsmallmatrix} \id \\ 0 \end{bsmallmatrix}}
          \arrow{d}[right]{\tilde{d}'_1}
      \&  P_1
          \arrow{r}[above]{\begin{bsmallmatrix} 0 & \id \end{bsmallmatrix}}
          \arrow[dashed]{d}[right]{\tilde{d}_1}
      \&  P''_1
          \arrow{r}
          \arrow{d}[right]{\tilde{d}''_1}
      \&  0
      \\
          0
          \arrow{r}
      \&  \ker(p'_0)
          \arrow{r}
      \&  \ker(p_0)
          \arrow{r}
      \&  \ker(p''_0)
          \arrow{r}
      \&  0
    \end{tikzcd}
  \]
  commute.
  It follows from the exactness of the sequence
  \[
    \ker(p_0)
    \xlongto{\tilde{d}_0}
    P_0
    \xlongto{p_0}
    X
  \]
  that the sequence
  \[
    P_1
    \xlongto{\tilde{d}_0 \tilde{d}_1}
    P_0
    \xlongto{p_0}
    X
  \]
  is again exact because~$\tilde{d}_1$ is an epimorphism.
  We have hence arrived at the following commutative diagram with exact columns:
  \[
    \begin{tikzcd}[ampersand replacement = \&, column sep = large]
          {}
      \&  \vdots
          \arrow{d}
      \&  {}
      \&  \vdots
          \arrow{d}
      \&  {}
      \\
          {}
      \&  P'_2
          \arrow{d}[right]{d'_2}
      \&  {}
      \&  P''_2
          \arrow{d}[right]{d''_2}
      \&  {}
      \\
          0
          \arrow{r}
      \&  P'_1
          \arrow{r}[above]{\begin{bsmallmatrix} \id \\ 0 \end{bsmallmatrix}}
          \arrow{d}[right]{d'_1}
      \&  P_1
          \arrow{r}[above]{\begin{bsmallmatrix} 0 & \id \end{bsmallmatrix}}
          \arrow{d}[right]{d_0}
      \&  P''_1
          \arrow{r}
          \arrow{d}[right]{d''_1}
      \& 0
      \\
          0
          \arrow{r}
      \&  P'_0
          \arrow{r}[above]{\begin{bsmallmatrix} \id \\ 0 \end{bsmallmatrix}}
          \arrow{d}[right]{p'_0}
      \&  P_0
          \arrow{r}[above]{\begin{bsmallmatrix} 0 & \id \end{bsmallmatrix}}
          \arrow{d}[right]{p_0}
      \&  P''_0
          \arrow{r}
          \arrow{d}[right]{p''_0}
      \&  0
      \\
          0
          \arrow{r}
      \&  X'
          \arrow{r}[below]{f}
          \arrow{d}
      \&  X
          \arrow{r}[below]{g}
          \arrow{d}
      \&  X''
          \arrow{r}
          \arrow{d}
      \&  0
      \\
          {}
      \&  0
      \&  0
      \&  0
      \&  {}
    \end{tikzcd}
  \]
  We can now continue by induction.
\end{proof}


\begin{remark*}
  The term \enquote{horse shoe lemma} comes from the form of the following diagram, that we are filling in with an exact column in the middle:
  \[
    \begin{tikzcd}[ampersand replacement = \&, column sep = large]
          {}
      \&  \vdots
          \arrow{d}
      \&  {}
      \&  \vdots
          \arrow{d}
      \&  {}
      \\
          {}
      \&  P'_2
          \arrow{d}[left]{d'_2}
      \&  {}
      \&  P''_2
          \arrow{d}[right]{d''_2}
      \&  {}
      \\
          {}
      \&  P'_1
          \arrow{d}[left]{d'_1}
      \&  {}
      \&  P''_1
          \arrow{d}[right]{d''_1}
      \&  {}
      \\
          {}
      \&  P'_0
          \arrow{d}[left]{p'_0}
      \&  {}
      \&  P''_0
          \arrow{d}[right]{p''_0}
      \&  {}
      \\
          0
          \arrow{r}
      \&  X'
          \arrow{r}[above]{f}
          \arrow{d}
      \&  X
          \arrow{r}[above]{g}
          \arrow{d}
      \&  X''
          \arrow{r}
          \arrow{d}
      \&  0
      \\
          {}
      \&  0
      \&  0
      \&  0
      \&  {}
    \end{tikzcd}
  \]
\end{remark*}





